(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{0:function(e,t,n){n("55Il"),n("p2bk"),e.exports=n("7RL8")},1:function(e,t){},2:function(e,t){},3:function(e,t){},"7RL8":function(e,t,n){"use strict";n.r(t);var o=n("YHGo"),i=n("q1tI"),s=n.n(i),r=n("i8i4"),a=n("ANjH"),c=n("Igns"),u=n("/MKj"),l=n("gyEF"),p=n.n(l),d=n("aJ4A"),f=n("sINF"),h=n("N2Rb"),m="USER/HIDE_SETTINGS",y="USER/REFRESH_SESSION_FULFILLED",g="USER/REFRESH_SESSION_REJECTED",v="USER/SAVE_SETTINGS",b="USER/SHOW_SETTINGS",w="USER/SIGNOUT",O="USER/START_STREAM",E="SESSION/TOGGLE_AUDIO",S="ROOM/ADD_PHOTO",R="ROOM/JOIN",k="ROOM/PEER_JOIN",j="ROOM/PEER_LEAVE",_="ROOM/PEER_POINTER",I="ROOM/PEER_SIGNAL",P="ROOM/PEER_STREAM",x="ROOM/MOVE_PHOTO",T="ROOM/REMOVE_PHOTO",A="ROOM/RESET";function q(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var L=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseURL="https://api.babelchat.tk/"}var t,n,o;return t=e,(n=[{key:"fetch",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(e){var t=e.body,n=e.endpoint,o=e.headers,r=void 0===o?{}:o,i=e.method,a=void 0===i?"GET":i,c=this.authorization,u=this.baseURL;return c&&(r.Authorization=c),!t||t instanceof FormData||(t=JSON.stringify(t),r["Content-Type"]="application/json"),fetch("".concat(u).concat(n),{body:t,headers:r,method:a}).then(function(e){var t=e.headers,n=e.status;if(n<200||400<=n)throw new Error(n);switch((t.get("Content-Type")||"").split(";")[0]){case"text/plain":return e.arrayBuffer();case"application/json":return e.json();default:return e}})})},{key:"setAuthorization",value:function(e){e?this.authorization="Bearer ".concat(e):delete this.authorization,this.token=e}}])&&q(t.prototype,n),o&&q(t,o),e}());function M(e){return e?{type:y,payload:e}:function(e){return e({type:"USER/REFRESH_SESSION",payload:L.fetch({endpoint:"user"})}).catch(function(){})}}n("bo1M");var N=n("wcCE");var C={en:{NotFound:{description:"This is not the web page you're looking for.",goBack:"Take me back home"},Room:{joining:"Joining room...",welcome:'Welcome to: "%{name}"'},Rooms:{peers:"%{count}/%{limit} peers"},User:{audioInput:"Audio input",settings:"Settings",saveSettings:"Save settings",signIn:"Sign-In",videoInput:"Video input"}},es:{NotFound:{description:"Esta no es la p치gina que est치s buscando.",goBack:"Vplver al inicio"},Room:{joining:"Entrando en la habitaci칩n...",welcome:'Bienvenido a: "%{name}"'},Rooms:{peers:"%{count}/%{limit} personas"},User:{signIn:"Iniciar Sesi칩n"}}},D=Object.keys(C),U={};D.forEach(function(e){U[e]=Object(N.recursive)(!0,C.en,C[e])});var W=n("1339"),z=n.n(W);function F(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var H=(new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.promises=[],this.getPromise=this.getPromise.bind(this),this.onKey=this.onKey.bind(this),this.onPointer=this.onPointer.bind(this),this.touches=z()(window,{filtered:!0,preventSimulated:!1}).on("start",this.onPointer).on("end",this.onPointer),window.addEventListener("keydown",this.onKey,!1),window.addEventListener("keyup",this.onKey,!1)}var t,n,o;return t=e,(n=[{key:"getPromise",value:function(){var t=this.isReady,n=this.promises;return new Promise(function(e){t?e():n.push(e)})}},{key:"onFirstInteraction",value:function(){var e=this.promises;this.touches.disable(),window.removeEventListener("keydown",this.onKey),window.removeEventListener("keyup",this.onKey),this.isReady=!0,e.forEach(function(e){return e()})}},{key:"onKey",value:function(){this.onFirstInteraction()}},{key:"onPointer",value:function(){this.onFirstInteraction()}}])&&F(t.prototype,n),o&&F(t,o),e}())).getPromise;function B(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(e){G(t,e,n[e])})}return t}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var V=Object(a.c)({name:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length?arguments[1]:void 0;switch(t.type){case R:return t.payload.name;case A:return"";default:return e}},peers:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length?arguments[1]:void 0;switch(n.type){case R:return e.forEach(function(e){return e.connection.destroy()}),n.payload.peers;case k:return[].concat(J(e),[n.payload.peer]);case j:return e.filter(function(e){var t=e.connection;return e.peer===n.payload.peer&&(t.destroy(),!0)});case _:return e.map(function(e){return e.peer===n.payload.peer?B({},e,{pointer:n.payload.pointer}):e});case I:return e.forEach(function(e){var t=e.connection;e.peer===n.payload.peer&&t.signal(n.payload.signal)}),e;case P:return e.map(function(e){if(e.peer!==n.payload.peer)return e;var t=document.createElement("video");return t.srcObject=n.payload.stream,t.onloadedmetadata=function(){return H().then(function(){return t.play()})},B({},e,{video:t})});case O:return e.forEach(function(e){e.connection.addStream(n.payload.stream)}),e;case A:return e.forEach(function(e){return e.connection.destroy()}),[];default:return e}},photos:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length?arguments[1]:void 0;switch(t.type){case R:return t.payload.photos;case S:return[].concat(J(e),[t.payload]);case x:return e.map(function(e){return e._id===t.payload.photo?B({},e,{origin:{x:t.payload.origin.x,y:t.payload.origin.y}}):e});case T:return e.filter(function(e){return e._id!==t.payload.photo});case A:return[];default:return e}},socket:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=1<arguments.length?arguments[1]:void 0;switch(t.type){case R:return t.payload.socket;case A:return!1;default:return e}}}),K=Object(a.c)({list:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length?arguments[1]:void 0;switch(t.type){case"ROOMS/FETCH_FULFILLED":return t.payload.sort(function(e,t){var n=e.name,o=t.name;return n.localeCompare(o)});default:return e}}}),X="BABELCHAT::",Y="".concat(X,"SESSION"),Q=JSON.parse(localStorage.getItem(Y)||"false");Q&&L.setAuthorization(Q.token);var Z=Object(a.c)({isAudioMuted:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];switch((1<arguments.length?arguments[1]:void 0).type){case E:return!e;default:return e}},isAuth:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!!Q;switch((1<arguments.length?arguments[1]:void 0).type){case y:return!0;case g:case w:return!1;default:return e}},isShowingSettings:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];switch((1<arguments.length?arguments[1]:void 0).type){case m:return!1;case b:return!0;default:return e}},profile:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Q?Q.profile:{},t=1<arguments.length?arguments[1]:void 0;switch(t.type){case y:return t.payload.profile;case g:case w:return{};default:return e}},settings:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{audioInput:localStorage.getItem("".concat(X,"audioInput"))||"",videoInput:localStorage.getItem("".concat(X,"videoInput"))||""},t=1<arguments.length?arguments[1]:void 0;switch(t.type){case v:var n=t.payload,o=n.audioInput,r=n.videoInput;return localStorage.setItem("".concat(X,"audioInput"),o||""),localStorage.setItem("".concat(X,"videoInput"),r||""),{audioInput:o,videoInput:r};default:return e}},stream:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=1<arguments.length?arguments[1]:void 0;switch(t.type){case O:return t.payload.stream;case A:return e&&e.getTracks().forEach(function(e){return e.stop()}),!1;case E:return e&&e.getAudioTracks().forEach(function(e){e.enabled=!e.enabled}),e;default:return e}},token:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Q?Q.token:"",t=1<arguments.length?arguments[1]:void 0;switch(t.type){case y:return L.setAuthorization(t.payload.token),localStorage.setItem(Y,JSON.stringify(t.payload)),t.payload.token;case g:case w:return L.setAuthorization(!1),localStorage.removeItem(Y),"";default:return e}},video:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=1<arguments.length?arguments[1]:void 0;switch(t.type){case O:var n=document.createElement("video");return n.muted=!0,n.srcObject=t.payload.stream,n.onloadedmetadata=function(){return H().then(function(){return n.play()})},n;case A:return e&&(e.srcObject=null),!1;default:return e}}}),$=Object(a.c)({i18n:h.i18nReducer,loadingBar:l.loadingBarReducer,room:V,rooms:K,user:Z}),ee=n("2INN"),te=n("mf+E"),ne=n("jKe7"),oe=n("17x9"),re=n.n(oe),ie=n("vOnD"),ae=n("O1PE");function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ue(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function se(e,t){return!t||"object"!==ce(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pe(e,t){return(pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var de=function(e){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=se(this,le(n).call(this,e))).dom=s.a.createRef(),t}var t,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}(n,i["Component"]),t=n,(o=[{key:"componentDidMount",value:function(){var e=this.dom,t=this.props.video;e.current.appendChild(t)}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){var e=this.dom;return s.a.createElement("div",{ref:e})}}])&&ue(t.prototype,o),r&&ue(t,r),n}();de.propTypes={video:re.a.object.isRequired};var fe=de;function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ve(e,t){return(ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var be=ie.a.div.withConfig({displayName:"settings__Overlay",componentId:"unzmsy-0"})(["position:fixed;top:0;left:0;bottom:0;width:100%;background:rgba(0,0,0,.75);z-index:100000;"]),we=ie.a.div.withConfig({displayName:"settings__Wrapper",componentId:"unzmsy-1"})(["position:absolute;top:50%;left:50%;transform:translate(-50%,-75%);width:400px;display:flex;flex-direction:column;border-radius:2px;"]),Oe=ie.a.h2.withConfig({displayName:"settings__Heading",componentId:"unzmsy-2"})(["flex-shrink:0;display:flex;justify-content:space-between;align-items:center;height:40px;margin:0;font-size:1.25em;padding:0 1rem;background:#151515;color:#eee;border-radius:2px 2px 0 0;> a{display:flex;text-decoration:none;font-size:1.5em;cursor:pointer;}"]),Ee=ie.a.form.withConfig({displayName:"settings__Form",componentId:"unzmsy-3"})(["padding:1rem;background:#eee;color:#353535;border-radius:0 0 2px 2px;> div{margin-top:0.5rem;&:first-child{margin-top:0;}> label{font-weight:700;}> select{width:100%;padding:0.5rem;cursor:pointer;}> button{margin:1rem auto;padding:0.5rem 1rem;cursor:pointer;}&.submit{display:flex;}}"]),Se=function(e){function r(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),n=this,(t=!(o=ye(r).call(this,e))||"object"!==he(o)&&"function"!=typeof o?ge(n):o).onSubmit=t.onSubmit.bind(ge(t)),t.state={},t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ve(e,t)}(r,i["PureComponent"]),t=r,(n=[{key:"componentDidMount",value:function(){var o=this;navigator.mediaDevices.enumerateDevices().then(function(e){var t=e.filter(function(e){return"audioinput"===e.kind}),n=e.filter(function(e){return"videoinput"===e.kind});o.setState({audioInputs:t,videoInputs:n})}).catch(function(){})}},{key:"onSubmit",value:function(e){var t=this.props,n=t.hide,o=t.save;e.preventDefault();var r=e.target;o({audioInput:r.audioInput.value,videoInput:r.videoInput.value}),n()}},{key:"render",value:function(){var e=this.props,t=e.settings,n=t.audioInput,o=t.videoInput,r=e.hide,i=this.state,a=i.audioInputs,c=i.videoInputs;return a&&c?s.a.createElement(be,null,s.a.createElement(we,null,s.a.createElement(Oe,null,s.a.createElement(h.Translate,{value:"User.settings"}),s.a.createElement("a",{onClick:function(){return r()}},s.a.createElement(ae.TiTimes,null))),s.a.createElement(Ee,{onSubmit:this.onSubmit},s.a.createElement("div",null,s.a.createElement("label",null,s.a.createElement(h.Translate,{value:"User.audioInput"})),s.a.createElement("select",{name:"audioInput",defaultValue:n},a.map(function(e){var t=e.deviceId,n=e.label;return s.a.createElement("option",{key:t,value:t},n)}))),s.a.createElement("div",null,s.a.createElement("label",null,s.a.createElement(h.Translate,{value:"User.videoInput"})),s.a.createElement("select",{name:"videoInput",defaultValue:o},c.map(function(e){var t=e.deviceId,n=e.label;return s.a.createElement("option",{key:t,value:t},n)}))),s.a.createElement("div",{className:"submit"},s.a.createElement("button",{type:"submit"},s.a.createElement(h.Translate,{value:"User.saveSettings"})))))):null}}])&&me(t.prototype,n),o&&me(t,o),r}();Se.propTypes={settings:re.a.shape({audioInput:re.a.string.isRequired,videoInput:re.a.string.isRequired}).isRequired,hide:re.a.func.isRequired,save:re.a.func.isRequired};var Re=Object(u.connect)(function(e){return{settings:e.user.settings}},{hide:function(){return{type:m}},save:function(e){var t=e.audioInput,n=e.videoInput;return{type:v,payload:{audioInput:t,videoInput:n}}}})(Se),ke=ie.a.div.withConfig({displayName:"user__Wrapper",componentId:"wx5awn-0"})(["position:absolute;top:0;right:0;background:#000;width:100px;height:100px;vertical-align:middle;box-shadow:0 0 10px rgba(0,0,0,.5);overflow:hidden;.actions{display:flex;position:absolute;bottom:-100%;width:100%;align-items:center;justify-content:space-between;font-size:2em;color:#eee;transition:bottom ease-out .2s;will-change:bottom;> a{cursor:pointer;&:hover{background:#eee;color:#333;}}}&:hover .actions{bottom:0;}"]),je=function(e){var t=e.isAudioMuted,n=e.isAuth,o=e.isShowingSettings,r=e.profile,i=e.video,a=e.showSettings,c=e.signout,u=e.toggleAudio;return n?s.a.createElement("div",null,s.a.createElement(ke,null,i&&i.srcObject.getVideoTracks().length?s.a.createElement(fe,{video:i}):s.a.createElement("img",{src:"".concat(L.baseURL,"user/").concat(r._id,"/photo?auth=").concat(L.token)}),s.a.createElement("div",{className:"actions"},s.a.createElement("a",{onClick:u},t?s.a.createElement(ae.TiVolumeMute,null):s.a.createElement(ae.TiVolumeDown,null)),s.a.createElement("a",{onClick:a},s.a.createElement(ae.TiCog,null)),s.a.createElement("a",{onClick:c},s.a.createElement(ae.TiEject,null)))),o?s.a.createElement(Re,null):null):null};je.propTypes={isAudioMuted:re.a.bool.isRequired,isAuth:re.a.bool.isRequired,isShowingSettings:re.a.bool.isRequired,profile:re.a.shape({_id:re.a.string}).isRequired,video:re.a.oneOfType([re.a.bool,re.a.object]).isRequired,showSettings:re.a.func.isRequired,signout:re.a.func.isRequired,toggleAudio:re.a.func.isRequired};var _e=Object(u.connect)(function(e){var t=e.user;return{isAudioMuted:t.isAudioMuted,isAuth:t.isAuth,isShowingSettings:t.isShowingSettings,profile:t.profile,video:t.video}},{showSettings:function(){return{type:b}},signout:function(){return{type:w}},toggleAudio:function(){return{type:E}}})(je),Ie=ie.a.div.withConfig({displayName:"layout__Route",componentId:"wopef3-0"})(["display:flex;height:100vh;"]),Pe={backgroundColor:"#bebebe"},xe=function(e){var t=e.children;return s.a.createElement("div",null,s.a.createElement(p.a,{style:Pe}),s.a.createElement(_e,null),s.a.createElement(Ie,null,t))};xe.propTypes={children:re.a.node.isRequired};var Te=xe,Ae=n("fWck");function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(o=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Me(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function De(e,t){return(De=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ue=function(e){function r(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),n=this,(t=!(o=Ne(r).call(this,e))||"object"!==qe(o)&&"function"!=typeof o?Ce(n):o).dom=s.a.createRef(),t.onDrop=t.onDrop.bind(Ce(t)),t.onPointerWheel=t.onPointerWheel.bind(Ce(t)),t.onResize=t.onResize.bind(Ce(t)),t.origin={x:0,y:0},t.scale=1,t.peers={},t.photos={},t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&De(e,t)}(r,i["Component"]),t=r,o=[{key:"onDragOver",value:function(e){e.preventDefault()}}],(n=[{key:"componentDidMount",value:function(){var e=this.dom.current;this.loadPhotos(this.props),e.addEventListener("dragover",r.onDragOver,!1),e.addEventListener("drop",this.onDrop,!1),window.addEventListener("resize",this.onResize,!1),this.touches=z()(window,{filtered:!0,preventSimulated:!1}).on("start",this.onPointerStart.bind(this)).on("move",this.onPointerMove.bind(this)).on("end",this.onPointerEnd.bind(this)),Object(Ae.addWheelListener)(window,this.onPointerWheel),this.onResize()}},{key:"componentWillReceiveProps",value:function(e){this.loadPhotos(e),this.draw(e)}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentWillUnmount",value:function(){var e=this.dom.current;this.touches.disable(),e.removeEventListener("dragover",r.onDragOver),e.removeEventListener("drop",this.onDrop),Object(Ae.removeWheelListener)(window,this.onPointerWheel),window.removeEventListener("resize",this.onResize)}},{key:"onDrop",value:function(e){var t=this.props.socket,n=e.clientX,o=e.clientY,r=Le(e.dataTransfer.files,1)[0];if(e.preventDefault(),r){var i=this.getPointer([n,o]),a=new FileReader;a.onload=function(){t.send(JSON.stringify({type:"ROOM/ADD_PHOTO",payload:{origin:i,photo:a.result.substr(a.result.indexOf("base64")+7)}}))},a.readAsDataURL(r)}}},{key:"onPointerStart",value:function(e,t){var a=this,n=this.props,o=n.photos,r=n.socket,i=e.button||0,c=this.getPointer(t),u=c.x,s=c.y,l=o.filter(function(e){var t=e._id,n=e.origin,o=a.photos[t];if(!o)return!1;var r=o.width,i=o.height;return!(u<n.x||u>n.x+r||s<n.y||s>n.y+i)});l.reverse();var p=l[0];0===i&&!p||2===i?this.dragging={canvas:t}:0===i&&p&&(e.shiftKey?r.send(JSON.stringify({type:"ROOM/REMOVE_PHOTO",payload:{photo:p._id}})):this.dragging={offset:{x:p.origin.x-u,y:p.origin.y-s},photo:p})}},{key:"onPointerMove",value:function(e,t){var n=this.dragging,o=this.origin,r=this.scale,i=this.props.peers,a=this.getPointer(t),c=a.x,u=a.y;if(i.forEach(function(e){var t=e.connection;t._channel&&"open"===t._channel.readyState&&t.send(new Int32Array([c,u]))}),n){if(n.canvas&&(o.x+=(t[0]-n.canvas[0])/r,o.y+=(t[1]-n.canvas[1])/r,n.canvas=t),n.photo){var s=n.offset,l=n.photo;l.origin.x=c+s.x,l.origin.y=u+s.y}this.draw()}}},{key:"onPointerEnd",value:function(){var e=this.dragging,t=this.props.socket;if(e&&(delete this.dragging,e.photo)){var n=e.photo,o=n._id,r=n.origin;t.send(JSON.stringify({type:"ROOM/MOVE_PHOTO",payload:{origin:r,photo:o}}))}}},{key:"onPointerWheel",value:function(e){var t=e.deltaY,n=1+.075*Math.min(Math.max(-t,-1),1);this.scale*=n,this.scale=Math.min(Math.max(this.scale,.25),2),this.draw()}},{key:"onResize",value:function(){var e=this.dom.current;e.width=window.innerWidth,e.height=window.innerHeight,this.draw()}},{key:"getPointer",value:function(e){var t=Le(e,2),n=t[0],o=t[1],r=this.dom.current,i=this.origin,a=this.scale;return{x:Math.round((n-.5*r.width)/a-i.x),y:Math.round((o-.5*r.height)/a-i.y)}}},{key:"loadPhotos",value:function(e){var r=this,t=e.peers,n=e.photos;t.forEach(function(e){var t=e._id;if(!r.peers[t]){var n=new Image;n.src="".concat(L.baseURL,"user/").concat(t,"/photo?auth=").concat(L.token),n.onload=function(){return r.draw()},r.peers[t]=n}}),n.forEach(function(e){var t=e._id,n=e.photo;if(!r.photos[t]){var o=new Image;o.src="data:image/jpeg;base64,".concat(n),o.onload=function(){return r.draw()},r.photos[t]=o}})}},{key:"draw",value:function(e){var c=this,t=this.dom.current,n=this.origin,u=this.scale,o=e||this.props,r=o.name,i=o.peers,a=o.photos,s=t.getContext("2d");t.width=t.width,s.translate(.5*t.width,.5*t.height),s.scale(u,u),s.translate(n.x,n.y),s.textAlign="center",s.textBaseline="middle",s.fillStyle="#999",s.font="32px Arial",s.fillText(h.I18n.t("Room.".concat(r?"welcome":"joining"),{name:r}),0,0),a.forEach(function(e){var t=e._id,n=e.origin;c.photos[t]&&s.drawImage(c.photos[t],n.x,n.y)}),i.forEach(function(e){var t=e._id,n=e.pointer;if(c.peers[t]&&n){var o=Le(n,2),r=o[0],i=o[1],a=24/u;s.beginPath(),s.arc(r,i,a,0,2*Math.PI),s.fill(),s.save(),s.beginPath(),s.arc(r,i,.9*a,0,2*Math.PI),s.clip(),s.drawImage(c.peers[t],r-a,i-a,2*a,2*a),s.restore()}})}},{key:"render",value:function(){var e=this.dom;return s.a.createElement("canvas",{ref:e})}}])&&Me(t.prototype,n),o&&Me(t,o),r}();Ue.propTypes={name:re.a.string.isRequired,peers:re.a.arrayOf(re.a.shape({_id:re.a.string.isRequired,connection:re.a.object.isRequired,pointer:re.a.arrayOf(re.a.number)})).isRequired,photos:re.a.arrayOf(re.a.shape({origin:re.a.shape({x:re.a.number.isRequired,y:re.a.number.isRequired}),photo:re.a.string.isRequired})).isRequired,socket:re.a.oneOfType([re.a.bool,re.a.object]).isRequired};var We=Object(u.connect)(function(e){var t=e.room;return{name:t.name,peers:t.peers,photos:t.photos,socket:t.socket}})(Ue),ze=n("9C/b"),Fe=n("TX9C"),He=n("BRrH"),Be=n.n(He);function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Je(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ve(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(e){Ke(t,e,n[e])})}return t}function Ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ye(e){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ze(e,t){return(Ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $e=function(e){function r(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),n=this,(t=!(o=Ye(r).call(this,e))||"object"!==Ge(o)&&"function"!=typeof o?Qe(n):o).onMessage=t.onMessage.bind(Qe(t)),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ze(e,t)}(r,i["Component"]),t=r,(n=[{key:"componentWillMount",value:function(){var e=this.props,t=e.match.params.slug,n=e.settings,o=n.audioInput,r=n.videoInput,i=e.startStream;this.connectToServer(t),navigator.mediaDevices.getUserMedia({audio:!o||{deviceId:{exact:o}},video:Ve({width:640,height:640},r?{deviceId:{exact:r}}:{facingMode:"user"})}).then(i).catch(function(){navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(i).catch(function(){})})}},{key:"componentWillReceiveProps",value:function(e){var t=e.match.params.slug,n=this.props,o=n.match.params.slug,r=n.reset;o!==t&&(r(),this.connectToServer(t))}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentWillUnmount",value:function(){var e=this.socket,t=this.props,n=t.hideLoading,o=t.reset;e.readyState===Fe.a.CONNECTING&&n(),e.close(1e3),o()}},{key:"onMessage",value:function(e){var t,n=this,o=e.data,r=this.socket,i=this.props,a=i.addPhoto,c=i.history,u=i.join,s=i.movePhoto,l=i.peerJoin,p=i.peerLeave,d=i.peerSignal,f=i.removePhoto;try{t=JSON.parse(o)}catch(e){return}switch(t.type){case S:a(t.payload);break;case x:s(t.payload);break;case T:f(t.payload);break;case R:u(Ve({},t.payload,{peers:t.payload.peers.map(function(e){return n.connectToPeer(e,!0)}),socket:r}));break;case k:l(this.connectToPeer(t.payload));break;case j:p(t.payload);break;case I:d(t.payload);break;case"ROOM/ERROR":c.replace("FULL_ROOM"===t.payload?"/rooms":"/404")}}},{key:"connectToServer",value:function(e){var t=this,n=this.props,o=n.hideLoading,r=n.showLoading;this.socket&&(this.socket.readyState===Fe.a.CONNECTING&&o(),this.socket.close(1e3)),r(),this.socket=new Fe.a("".concat(L.baseURL.replace(/http/,"ws"),"room/").concat(e),L.token),this.socket.onopen=function(){t.socket.onclose=null,t.socket.onerror=null,o()},this.socket.onmessage=this.onMessage}},{key:"connectToPeer",value:function(n){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],t=this.socket,o=this.props,r=o.stream,i=o.peerPointer,a=o.peerStream;return n.connection=new Be.a({initiator:e,stream:r}),n.connection.on("signal",function(e){t.send(JSON.stringify({type:"ROOM/PEER_SIGNAL",payload:{peer:n.peer,signal:e}}))}),n.connection.on("data",function(e){var t=e.buffer;return i({peer:n.peer,pointer:Je(new Int32Array(t))})}),n.connection.on("stream",function(e){return a({peer:n.peer,stream:e})}),n}},{key:"render",value:function(){return null}}])&&Xe(t.prototype,n),o&&Xe(t,o),r}();$e.propTypes={history:re.a.object.isRequired,match:re.a.shape({params:re.a.shape({slug:re.a.string.isRequired}).isRequired}).isRequired,settings:re.a.shape({audioInput:re.a.string.isRequired,videoInput:re.a.string.isRequired}).isRequired,stream:re.a.oneOfType([re.a.bool,re.a.object]).isRequired,addPhoto:re.a.func.isRequired,hideLoading:re.a.func.isRequired,join:re.a.func.isRequired,movePhoto:re.a.func.isRequired,removePhoto:re.a.func.isRequired,reset:re.a.func.isRequired,peerJoin:re.a.func.isRequired,peerLeave:re.a.func.isRequired,peerPointer:re.a.func.isRequired,peerSignal:re.a.func.isRequired,peerStream:re.a.func.isRequired,showLoading:re.a.func.isRequired,startStream:re.a.func.isRequired};var et=Object(ze.a)(Object(u.connect)(function(e){var t=e.user;return{settings:t.settings,stream:t.stream}},{addPhoto:function(e){var t=e._id,n=e.origin,o=e.photo;return{type:S,payload:{_id:t,origin:n,photo:o}}},hideLoading:l.hideLoading,join:function(e){var t=e.name,n=e.peers,o=e.photos,r=e.socket;return{type:R,payload:{name:t,peers:n,photos:o,socket:r}}},movePhoto:function(e){var t=e.origin,n=e.photo;return{type:x,payload:{origin:t,photo:n}}},removePhoto:function(e){var t=e.photo;return{type:T,payload:{photo:t}}},reset:function(){return{type:A}},peerJoin:function(e){return{type:k,payload:{peer:e}}},peerLeave:function(e){var t=e.peer;return{type:j,payload:{peer:t}}},peerPointer:function(e){var t=e.peer,n=e.pointer;return{type:_,payload:{peer:t,pointer:n}}},peerSignal:function(e){var t=e.peer,n=e.signal;return{type:I,payload:{peer:t,signal:n}}},peerStream:function(e){var t=e.peer,n=e.stream;return{type:P,payload:{peer:t,stream:n}}},showLoading:l.showLoading,startStream:function(n){return function(e,t){t().user.isAudioMuted&&n.getAudioTracks().forEach(function(e){e.enabled=!1}),e({type:O,payload:{stream:n}})}}})($e)),tt=ie.a.div.withConfig({displayName:"peers__Listing",componentId:"j59ndp-0"})(["position:absolute;top:100px;right:0;> img,> div > video{display:block;background:#000;width:100px;height:100px;vertical-align:middle;box-shadow:0 0 10px rgba(0,0,0,.5);}"]),nt=function(e){var t=e.peers;return s.a.createElement(tt,null,t.map(function(e){var t=e._id,n=e.peer,o=e.video;return o&&o.srcObject.getVideoTracks().length?s.a.createElement(fe,{key:n,video:o}):s.a.createElement("img",{key:n,src:"".concat(L.baseURL,"user/").concat(t,"/photo?auth=").concat(L.token)})}))};nt.propTypes={peers:re.a.arrayOf(re.a.shape({_id:re.a.string.isRequired,peer:re.a.string.isRequired,video:re.a.object})).isRequired};var ot=Object(u.connect)(function(e){return{peers:e.room.peers}})(nt),rt=function(){return s.a.createElement("div",null,s.a.createElement(We,null),s.a.createElement(et,null),s.a.createElement(ot,null))},it=n("2iEm");function at(e){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ct(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ut(e,t){return!t||"object"!==at(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function st(e){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lt(e,t){return(lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pt=ie.a.div.withConfig({displayName:"rooms__Listing",componentId:"tnos5q-0"})(["display:flex;flex-direction:column;align-items:center;width:512px;margin:0 auto;background:#fff;> a{display:flex;box-sizing:border-box;width:100%;align-items:center;justify-content:space-between;font-size:1.5em;padding:0.5rem 1rem;color:#000;text-decoration:none;&.full{opacity:0.5;pointer-events:none;}> strong > img{width:1.5rem;height:1.125rem;margin-right:1rem;vertical-align:middle;}&:hover{background:#bbb;}}> h1{box-sizing:border-box;width:100%;margin:0 0 1rem;padding:1rem;border-bottom:1px solid #aaa;}"]),dt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ut(this,st(t).apply(this,arguments))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lt(e,t)}(t,i["PureComponent"]),n=t,(o=[{key:"componentDidMount",value:function(){(0,this.props.fetch)()}},{key:"render",value:function(){var e=this.props.list;return s.a.createElement(pt,null,s.a.createElement("h1",null,"Rooms"),e.map(function(e){var t=e.flag,n=e.name,o=e.peerLimit,r=e.peers,i=e.slug;return s.a.createElement(it.a,{key:i,to:{pathname:"/".concat(i)},className:o<=r?"full":""},s.a.createElement("strong",null,s.a.createElement("img",{src:"".concat("https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/flags/4x3/").concat(t,".svg")}),n),s.a.createElement(h.Translate,{count:r,limit:o,value:"Rooms.peers"}))}))}}])&&ct(n.prototype,o),r&&ct(n,r),t}();dt.propTypes={list:re.a.arrayOf(re.a.shape({flag:re.a.string.isRequired,name:re.a.string.isRequired,peerLimit:re.a.number.isRequired,peers:re.a.number.isRequired,slug:re.a.string.isRequired})).isRequired,fetch:re.a.func.isRequired};var ft=Object(u.connect)(function(e){return{list:e.rooms.list}},{fetch:function(){return{type:"ROOMS/FETCH",payload:L.fetch({endpoint:"rooms"})}}})(dt),ht=ie.a.button.withConfig({displayName:"button",componentId:"sc-182fno4-0"})(["display:flex;align-items:center;justify-content:center;padding:0.5rem 1rem;margin:0;background-color:",";color:",";border:1px solid #151515;border-radius:2px;outline:0;font-family:inherit;font-size:inherit;font-weight:700;transition:background-color ease-out .2s,opacity ease-out .2s;will-change:background-color,opacity;cursor:pointer;> span{margin-left:0.5rem;}&:hover{background-color:",";}"],function(e){return e.primary?"#eee":"#333"},function(e){return e.primary?"#333":"#eee"},function(e){return e.primary?"#fff":"#555"});function mt(e){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function gt(e){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bt(e,t){return(bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var wt=ie.a.div.withConfig({displayName:"login__Wrapper",componentId:"iowkj6-0"})(["display:flex;width:100%;flex-direction:column;align-items:center;justify-content:center;"]),Ot=ie.a.div.withConfig({displayName:"login__Box",componentId:"iowkj6-1"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;box-sizing:border-box;background:#bebebe;border:1px solid #000;padding:3rem 6rem;> button{width:100%;font-size:1rem;align-items:center;justify-content:flex-start;> svg{font-size:2rem;margin-right:0.75rem;}}"]),Et=function(e){function r(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),n=this,(t=!(o=gt(r).call(this,e))||"object"!==mt(o)&&"function"!=typeof o?vt(n):o).loginWithGoogle=t.loginWithGoogle.bind(vt(t)),t.onMessage=t.onMessage.bind(vt(t)),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bt(e,t)}(r,i["PureComponent"]),t=r,(n=[{key:"componentDidMount",value:function(){window.addEventListener("message",this.onMessage,!1)}},{key:"componentWillUnmount",value:function(){var e=this.popupWatcher;window.removeEventListener("message",this.onMessage),e&&(clearInterval(e),delete this.popupWatcher)}},{key:"onMessage",value:function(e){var t=e.origin,n=e.data.session,o=this.popupWatcher,r=this.props.refreshSession;0===L.baseURL.indexOf(t)&&(clearInterval(o),delete this.popupWatcher,n&&r(n))}},{key:"loginWithGoogle",value:function(e){var t=this,n=e.screenX,o=e.screenY,r=(n||window.screen.width/2)-256,i=(o||window.screen.height/2)-256,a=window.open("".concat(L.baseURL,"user/google"),"loginWithGoogle","width=".concat(512,",height=").concat(512,",top=").concat(i,",left=").concat(r));this.popupWatcher&&clearInterval(this.popupWatcher),this.popupWatcher=setInterval(function(){if(!a.window)return clearInterval(t.popupWatcher),void delete t.popupWatcher;a.postMessage(!0,L.baseURL)},100)}},{key:"render",value:function(){return s.a.createElement(wt,null,s.a.createElement(Ot,null,s.a.createElement(ht,{type:"button",onClick:this.loginWithGoogle},s.a.createElement(ae.TiSocialGooglePlus,null),s.a.createElement(h.Translate,{value:"User.signIn"}))))}}])&&yt(t.prototype,n),o&&yt(t,o),r}();Et.propTypes={refreshSession:re.a.func.isRequired};var St=Object(u.connect)(function(){return{}},{refreshSession:M})(Et),Rt=ie.a.div.withConfig({displayName:"sc-404__Wrapper",componentId:"ga9xrh-0"})(["display:flex;width:100%;flex-direction:column;align-items:center;justify-content:center;"]),kt=ie.a.div.withConfig({displayName:"sc-404__Status",componentId:"ga9xrh-1"})(["font-size:6em;line-height:0.8em;color:#656565;margin-bottom:2rem;"]),jt=ie.a.div.withConfig({displayName:"sc-404__Description",componentId:"ga9xrh-2"})(["font-size:1.5em;"]),_t=ie.a.div.withConfig({displayName:"sc-404__Alternative",componentId:"ga9xrh-3"})(["margin:2rem 0 4rem;> a{text-decoration:none;font-size:1.2em;}"]),It=function(){return s.a.createElement(Rt,null,s.a.createElement(kt,null,"404"),s.a.createElement(jt,null,s.a.createElement(h.Translate,{value:"NotFound.description"})),s.a.createElement(_t,null,s.a.createElement(it.a,{to:{pathname:"/"}},s.a.createElement(ht,{type:"button",primary:!0},s.a.createElement(ae.TiArrowBack,null),s.a.createElement(h.Translate,{value:"NotFound.goBack"})))))};function Pt(){return(Pt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function xt(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Tt,At,qt,Lt,Mt=Object(u.connect)(function(e){return{isAuth:e.user.isAuth}})(function(e){var t=e.component,n=e.isAuth,o=e.requiresAuth,r=e.requiresNoAuth,i=xt(e,["component","isAuth","requiresAuth","requiresNoAuth"]),a=o&&!n||r&&n;return s.a.createElement(ee.a,Pt({},i,{render:function(e){return a?s.a.createElement(te.a,{to:n?"/":"/login"}):s.a.createElement(t,e)}}))}),Nt=function(){return s.a.createElement(Te,null,s.a.createElement(ne.a,null,s.a.createElement(Mt,{exact:!0,path:"/404",component:It}),s.a.createElement(Mt,{exact:!0,path:"/login",component:St,requiresNoAuth:!0}),s.a.createElement(Mt,{exact:!0,path:"/rooms",component:ft,requiresAuth:!0}),s.a.createElement(Mt,{exact:!0,path:"/:slug",component:rt,requiresAuth:!0}),s.a.createElement(te.a,{exact:!0,from:"/",to:"/rooms"}),s.a.createElement(Mt,{path:"*",component:It})))},Ct=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,a.d),Dt=Object(a.e)($,{},Ct(Object(a.a)(f.a,c.a,Object(l.loadingBarMiddleware)())));Tt=Dt,At=localStorage.getItem("BABELCHAT::LOCALE"),qt=((window.navigator.languages?window.navigator.languages[0]:null)||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage||"en").substr(0,2).toLowerCase(),Lt="en",~D.indexOf(At)?Lt=At:~D.indexOf(qt)&&(Lt=qt),Object(h.syncTranslationWithStore)(Tt),Tt.dispatch(Object(h.loadTranslations)(U)),Tt.dispatch(Object(h.setLocale)(Lt)),Dt.getState().user.isAuth&&Dt.dispatch(M());var Ut=Object(o.a)({basename:"/"}),Wt=document.getElementById("mount");Object(r.render)(s.a.createElement(u.Provider,{store:Dt},s.a.createElement(d.a,{history:Ut},s.a.createElement(Nt,null))),Wt),window.addEventListener("contextmenu",function(e){return e.preventDefault()},!1)},p2bk:function(e,t,n){}},[[0,1,2]]]);
//# sourceMappingURL=main.217ff82e835d4ebef1e4a19c46b94502.js.map