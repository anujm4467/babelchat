(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{0:function(e,t,n){n("55Il"),n("p2bk"),e.exports=n("7RL8")},1:function(e,t){},2:function(e,t){},3:function(e,t){},"7RL8":function(e,t,n){"use strict";n.r(t);var o=n("YHGo"),r=n("q1tI"),p=n.n(r),a=n("i8i4"),i=n("ANjH"),c=n("Igns"),u=n("/MKj"),l=n("gyEF"),s=n.n(l),d=n("aJ4A"),m=n("sINF"),f=n("N2Rb"),h="DIALOG/SHOW",g="DIALOG/HIDE",y="ORG/FETCH_FULFILLED",v="ORG/FETCH_USERS_FULFILLED",b="ORG/RESOLVE_REQUEST_FULFILLED",E="ORG/RESET",w="ROOM/ADD_PHOTO",O="ROOM/JOIN",S="ROOM/PEER_JOIN",R="ROOM/PEER_LEAVE",k="ROOM/PEER_POINTER",_="ROOM/PEER_SIGNAL",T="ROOM/PEER_STREAM",j="ROOM/MOVE_PHOTO",I="ROOM/REMOVE_PHOTO",P="ROOM/RESET",C="USER/REFRESH_SESSION_FULFILLED",x="USER/REFRESH_SESSION_REJECTED",A="USER/SAVE_SETTINGS",q="USER/SIGNOUT",L="USER/START_STREAM",M="USER/TOGGLE_AUDIO";function N(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var U=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseURL="https://api.babelchat.live/"}var t,n,o;return t=e,(n=[{key:"fetch",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(e){var t=e.body,n=e.endpoint,o=e.headers,a=void 0===o?{}:o,r=e.method,i=void 0===r?"GET":r,c=this.authorization,u=this.baseURL;return c&&(a.Authorization=c),!t||t instanceof FormData||(t=JSON.stringify(t),a["Content-Type"]="application/json"),fetch("".concat(u).concat(n),{body:t,headers:a,method:i}).then(function(e){var t=e.headers,n=e.status;if(n<200||400<=n)throw new Error(n);switch((t.get("Content-Type")||"").split(";")[0]){case"text/plain":return e.arrayBuffer();case"application/json":return e.json();default:return e}})})},{key:"setAuthorization",value:function(e){e?this.authorization="Bearer ".concat(e):delete this.authorization,this.token=e}}])&&N(t.prototype,n),o&&N(t,o),e}());function z(e){return e?{type:C,payload:e}:function(e){return e({type:"USER/REFRESH_SESSION",payload:U.fetch({endpoint:"user"})}).catch(function(){})}}n("bo1M");var D=n("wcCE");var G={en:{NotFound:{description:"This is not the web page you're looking for.",goBack:"Take me back home"},Org:{CreateRoom:{inviteOnly:"Invite only",title:"Create a room",flag:"Flag",name:"Name",peerLimit:"Peer limit",publicRoom:"Public room",submit:"Create room",users:"Students"},CTA:{copy:"Are you an academy manager/teacher?",button:"Try it now"},ManageUsers:{title:"Manage students",approve:"Approve",decline:"Decline",empty:"Your organization doesn't have any students yet."},Nav:{createRoom:"Create room",customize:"Customize",manageUsers:"Manage students",settings:"Settings"},Settings:{dangerZone:"Danger Zone",title:"Settings",name:"Name",organization:"Organization",remove:"Remove organization",save:"Save settings"},Signup:{title:"Create an account",name:"Organization name",submit:"Create account"}},Room:{joining:"Joining room...",welcome:'Welcome to: "%{name}"'},Rooms:{peers:"%{count}/%{limit} peers"},User:{Settings:{title:"Settings",audioInput:"Audio input",save:"Save settings",videoInput:"Video input"},signIn:"Sign-In with google"}},es:{NotFound:{description:"Esta no es la página que estás buscando.",goBack:"Volver al inicio"},Org:{CreateRoom:{title:"Crear una sala",flag:"Bandera",name:"Nombre",peerLimit:"Límite de parcipantes",submit:"Crear sala"},CTA:{copy:"Eres gestor(a)/profesor(a) de una academia?",button:"Pruébalo ahora"},ManageUsers:{title:"Estudiantes",approve:"Aprobar",decline:"Rechazar"},Nav:{createRoom:"Crear sala",customize:"Personalizar",manageUsers:"Estudiantes",settings:"Preferencias"},Settings:{dangerZone:"Danger zone",title:"Preferencias",name:"Nombre",organization:"Organización",remove:"Eliminar organización",save:"Guardar preferencias"},Signup:{title:"Crear una cuenta",name:"Nombre de la organización",submit:"Crear cuenta"}},Room:{joining:"Entrando en la sala...",welcome:'Bienvenido a: "%{name}"'},Rooms:{peers:"%{count}/%{limit} personas"},User:{Settings:{title:"Preferencias",audioInput:"Entrada de audio",save:"Guardar preferencias",videoInput:"Entrada de vídeo"},signIn:"Iniciar Sesión con google"}}},F=Object.keys(G),B={};F.forEach(function(e){B[e]=Object(D.recursive)(!0,G.en,G[e])});function W(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(e){H(t,e,n[e])})}return t}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var J=Object(i.c)({hasLoaded:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];switch((1<arguments.length?arguments[1]:void 0).type){case y:return!0;case E:return!1;default:return e}},id:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length?arguments[1]:void 0;switch(t.type){case y:return t.payload._id;case E:return"";default:return e}},isActive:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=1<arguments.length?arguments[1]:void 0;switch(t.type){case y:return t.payload.isActive||!1;case E:return!1;default:return e}},isAdmin:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=1<arguments.length?arguments[1]:void 0;switch(t.type){case y:return t.payload.isAdmin||!1;case E:return!1;default:return e}},isUser:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=1<arguments.length?arguments[1]:void 0;switch(t.type){case y:return t.payload.isUser||!1;case"ORG/REQUEST_ACCESS_FULFILLED":return!0;case E:return!1;default:return e}},name:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length?arguments[1]:void 0;switch(t.type){case y:case"ORG/UPDATE_FULFILLED":return t.payload.name;case E:return"";default:return e}},pendingRequests:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case v:return t.payload.reduce(function(e,t){return e+(t.isRequest?1:0)},0);case b:return e-1;case E:return 0;default:return e}},rooms:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length?arguments[1]:void 0;switch(t.type){case"ORG/FETCH_ROOMS_FULFILLED":return t.payload.sort(function(e,t){var n=e.name,o=t.name;return n.localeCompare(o)});case"ORG/CREATE_ROOM_FULFILLED":return[].concat(V(e),[t.payload]).sort(function(e,t){var n=e.name,o=t.name;return n.localeCompare(o)});case"ORG/REMOVE_ROOM_FULFILLED":return e.filter(function(e){return e.slug!==t.payload.slug});case E:return[];default:return e}},users:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length?arguments[1]:void 0;switch(t.type){case v:return t.payload.sort(function(e,t){var n=e.name,o=t.name;return n.localeCompare(o)});case"ORG/REMOVE_USER_FULFILLED":return e.filter(function(e){return e._id!==t.payload.user});case b:return"approve"===t.payload.resolution?e.map(function(e){return e._id===t.payload.user?function(a){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.forEach(function(e){var t,n,o;t=a,o=r[n=e],n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o})}return a}({},e,{isRequest:void 0}):e}):e.filter(function(e){return e._id!==t.payload.user});case E:return[];default:return e}}}),K=n("1339"),Y=n.n(K);function Z(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Q=(new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.promises=[],this.getPromise=this.getPromise.bind(this),this.onKey=this.onKey.bind(this),this.onPointer=this.onPointer.bind(this),this.touches=Y()(window,{filtered:!0,preventSimulated:!1}).on("start",this.onPointer).on("end",this.onPointer),window.addEventListener("keydown",this.onKey,!1),window.addEventListener("keyup",this.onKey,!1)}var t,n,o;return t=e,(n=[{key:"getPromise",value:function(){var t=this.isReady,n=this.promises;return new Promise(function(e){t?e():n.push(e)})}},{key:"onFirstInteraction",value:function(){var e=this.promises;this.touches.disable(),window.removeEventListener("keydown",this.onKey),window.removeEventListener("keyup",this.onKey),this.isReady=!0,e.forEach(function(e){return e()})}},{key:"onKey",value:function(){this.onFirstInteraction()}},{key:"onPointer",value:function(){this.onFirstInteraction()}}])&&Z(t.prototype,n),o&&Z(t,o),e}())).getPromise;function X(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(e){$(t,e,n[e])})}return t}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ee(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var te=Object(i.c)({name:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length?arguments[1]:void 0;switch(t.type){case O:return t.payload.name;case P:return"";default:return e}},peers:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length?arguments[1]:void 0;switch(n.type){case O:return e.forEach(function(e){return e.connection.destroy()}),n.payload.peers;case S:return[].concat(ee(e),[n.payload.peer]);case R:return e.filter(function(e){var t=e.connection;return e.peer===n.payload.peer&&(t.destroy(),!0)});case k:return e.map(function(e){return e.peer===n.payload.peer?X({},e,{pointer:n.payload.pointer}):e});case _:return e.forEach(function(e){var t=e.connection;e.peer===n.payload.peer&&t.signal(n.payload.signal)}),e;case T:return e.map(function(e){if(e.peer!==n.payload.peer)return e;var t=document.createElement("video");return t.srcObject=n.payload.stream,t.onloadedmetadata=function(){return Q().then(function(){return t.play()})},X({},e,{video:t})});case L:return e.forEach(function(e){e.connection.addStream(n.payload.stream)}),e;case P:return e.forEach(function(e){return e.connection.destroy()}),[];default:return e}},photos:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length?arguments[1]:void 0;switch(t.type){case O:return t.payload.photos;case w:return[].concat(ee(e),[t.payload]);case j:return e.map(function(e){return e._id===t.payload.photo?X({},e,{origin:{x:t.payload.origin.x,y:t.payload.origin.y}}):e});case I:return e.filter(function(e){return e._id!==t.payload.photo});case P:return[];default:return e}},socket:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=1<arguments.length?arguments[1]:void 0;switch(t.type){case O:return t.payload.socket;case P:return!1;default:return e}}}),ne="BABELCHAT::",oe="".concat(ne,"SESSION"),ae=JSON.parse(localStorage.getItem(oe)||"false");ae&&U.setAuthorization(ae.token);var re=Object(i.c)({isAudioMuted:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];switch((1<arguments.length?arguments[1]:void 0).type){case M:return!e;default:return e}},isAuth:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!!ae;switch((1<arguments.length?arguments[1]:void 0).type){case C:return!0;case x:case q:return!1;default:return e}},orgs:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length?arguments[1]:void 0;switch(t.type){case"USER/FETCH_ORGS_FULFILLED":return t.payload.sort(function(e,t){var n=e.name,o=t.name;return n.localeCompare(o)});case q:return[];default:return e}},profile:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:ae?ae.profile:{},t=1<arguments.length?arguments[1]:void 0;switch(t.type){case C:return t.payload.profile;case x:case q:return{};default:return e}},settings:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{audioInput:localStorage.getItem("".concat(ne,"audioInput"))||"",videoInput:localStorage.getItem("".concat(ne,"videoInput"))||""},t=1<arguments.length?arguments[1]:void 0;switch(t.type){case A:var n=t.payload,o=n.audioInput,a=n.videoInput;return localStorage.setItem("".concat(ne,"audioInput"),o||""),localStorage.setItem("".concat(ne,"videoInput"),a||""),{audioInput:o,videoInput:a};default:return e}},stream:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=1<arguments.length?arguments[1]:void 0;switch(t.type){case L:return t.payload.stream;case P:return e&&e.getTracks().forEach(function(e){return e.stop()}),!1;case M:return e&&e.getAudioTracks().forEach(function(e){e.enabled=!e.enabled}),e;default:return e}},token:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:ae?ae.token:"",t=1<arguments.length?arguments[1]:void 0;switch(t.type){case C:return U.setAuthorization(t.payload.token),localStorage.setItem(oe,JSON.stringify(t.payload)),t.payload.token;case x:case q:return U.setAuthorization(!1),localStorage.removeItem(oe),"";default:return e}},video:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=1<arguments.length?arguments[1]:void 0;switch(t.type){case L:var n=document.createElement("video");return n.muted=!0,n.srcObject=t.payload.stream,n.onloadedmetadata=function(){return Q().then(function(){return n.play()})},n;case P:return e&&(e.srcObject=null),!1;default:return e}}}),ie=Object(i.c)({dialog:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0;switch(t.type){case h:return W({},e,H({},t.payload.id,!0));case g:return W({},e,H({},t.payload.id,!1));default:return e}},i18n:f.i18nReducer,loadingBar:l.loadingBarReducer,org:J,room:te,user:re}),ce=n("2INN"),ue=n("mf+E"),le=n("jKe7"),se=n("17x9"),de=n.n(se),me=n("vOnD"),pe=n("O1PE");function fe(e){return{type:g,payload:{id:e}}}function he(e){return{type:h,payload:{id:e}}}function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ve(e,t){return!t||"object"!==ge(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var we=function(e){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=ve(this,be(n).call(this,e))).dom=p.a.createRef(),t}var t,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(n,r["Component"]),t=n,(o=[{key:"componentDidMount",value:function(){var e=this.dom,t=this.props.video;e.current.appendChild(t)}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){var e=this.dom;return p.a.createElement("div",{ref:e})}}])&&ye(t.prototype,o),a&&ye(t,a),n}();we.propTypes={video:de.a.object.isRequired};var Oe=we,Se=me.a.button.withConfig({displayName:"button",componentId:"sc-182fno4-0"})(["display:flex;align-items:center;justify-content:center;padding:0.5rem 1rem;margin:0;background-color:",";color:#eee;border:1px solid #151515;border-radius:2px;outline:0;font-family:inherit;font-size:inherit;font-weight:700;transition:background-color ease-out .2s;will-change:background-color;cursor:pointer;> span{margin-left:0.5rem;}&:hover{background-color:#393;}"],function(e){return e.primary?"#393":"#111"}),Re=me.a.div.withConfig({displayName:"dialog__Overlay",componentId:"r5l1bo-0"})(["position:fixed;top:0;left:0;bottom:0;width:100%;background:rgba(0,0,0,.75);z-index:100000;"]),ke=me.a.div.withConfig({displayName:"dialog__Wrapper",componentId:"r5l1bo-1"})(["position:absolute;top:50%;left:50%;transform:translate(-50%,-75%);width:",";display:flex;flex-direction:column;border-radius:2px;"],function(e){return e.width}),_e=me.a.h2.withConfig({displayName:"dialog__Heading",componentId:"r5l1bo-2"})(["flex-shrink:0;display:flex;justify-content:space-between;align-items:center;height:40px;margin:0;font-size:1.25em;padding:0 1rem;background:#393;color:#eee;border-radius:2px 2px 0 0;> a{display:flex;text-decoration:none;font-size:1.5em;cursor:pointer;}"]),Te=me.a.div.withConfig({displayName:"dialog__Content",componentId:"r5l1bo-3"})(["padding:1rem;background:#eee;color:#353535;border-radius:0 0 2px 2px;"]),je=function(e){var t=e.children,n=e.id,o=e.isShowing,a=e.title,r=e.width,i=e.hide;return o?p.a.createElement(Re,null,p.a.createElement(ke,{width:r||"400px"},p.a.createElement(_e,null,p.a.createElement(f.Translate,{value:a||"".concat(n,".title")}),p.a.createElement("a",{onClick:function(){return i(n)}},p.a.createElement(pe.TiTimes,null))),p.a.createElement(Te,null,t))):null};je.defaultProps={title:void 0,width:void 0},je.propTypes={children:de.a.node.isRequired,id:de.a.string.isRequired,isShowing:de.a.bool.isRequired,title:de.a.string,width:de.a.string,hide:de.a.func.isRequired};var Ie=Object(u.connect)(function(e,t){return{isShowing:e.dialog[t.id]||!1}},{hide:fe})(je),Pe=me.a.form.withConfig({displayName:"form",componentId:"sc-1i7o20f-0"})(["> div{margin-top:0.5rem;text-align:left;&:first-child{margin-top:0;}> label{display:block;width:100%;font-weight:700;}> input,> select{display:block;font-family:inherit;box-sizing:border-box;width:100%;padding:0.5rem;cursor:pointer;border:1px solid #ccc;}> button{margin:1rem auto 0;padding:0.5rem 1rem;cursor:pointer;}}"]);function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Le(e,t){return(Le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Me=function(e){function a(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=this,(t=!(o=Ae(a).call(this,e))||"object"!==Ce(o)&&"function"!=typeof o?qe(n):o).onSubmit=t.onSubmit.bind(qe(t)),t.state={},t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Le(e,t)}(a,r["PureComponent"]),t=a,(n=[{key:"componentDidMount",value:function(){var o=this;navigator.mediaDevices.enumerateDevices().then(function(e){var t=e.filter(function(e){return"audioinput"===e.kind}),n=e.filter(function(e){return"videoinput"===e.kind});o.setState({audioInputs:t,videoInputs:n})}).catch(function(){})}},{key:"onSubmit",value:function(e){var t=this.props,n=t.hide,o=t.isStreaming,a=t.save;e.preventDefault();var r=e.target;a({audioInput:r.audioInput.value,videoInput:r.videoInput.value}),n("User.Settings"),o&&window.location.reload()}},{key:"render",value:function(){var e=this.props.settings,t=e.audioInput,n=e.videoInput,o=this.state,a=o.audioInputs,r=o.videoInputs;return a&&r?p.a.createElement(Ie,{id:"User.Settings"},p.a.createElement(Pe,{onSubmit:this.onSubmit},p.a.createElement("div",null,p.a.createElement("label",null,p.a.createElement(f.Translate,{value:"User.Settings.audioInput"})),p.a.createElement("select",{name:"audioInput",defaultValue:t},a.map(function(e){var t=e.deviceId,n=e.label;return p.a.createElement("option",{key:t,value:t},n)}))),p.a.createElement("div",null,p.a.createElement("label",null,p.a.createElement(f.Translate,{value:"User.Settings.videoInput"})),p.a.createElement("select",{name:"videoInput",defaultValue:n},r.map(function(e){var t=e.deviceId,n=e.label;return p.a.createElement("option",{key:t,value:t},n)}))),p.a.createElement("div",{className:"submit"},p.a.createElement(Se,{type:"submit"},p.a.createElement(pe.TiTick,null),p.a.createElement(f.Translate,{value:"User.Settings.save"}))))):null}}])&&xe(t.prototype,n),o&&xe(t,o),a}();Me.propTypes={isStreaming:de.a.bool.isRequired,settings:de.a.shape({audioInput:de.a.string.isRequired,videoInput:de.a.string.isRequired}).isRequired,hide:de.a.func.isRequired,save:de.a.func.isRequired};var Ne=Object(u.connect)(function(e){var t=e.user,n=t.settings;return{isStreaming:!!t.stream,settings:n}},{hide:fe,save:function(e){var t=e.audioInput,n=e.videoInput;return{type:A,payload:{audioInput:t,videoInput:n}}}})(Me),Ue=me.a.div.withConfig({displayName:"user__Wrapper",componentId:"wx5awn-0"})(["position:absolute;top:0;right:0;background:#000;box-shadow:0 0 10px rgba(0,0,0,.5);overflow:hidden;&,> img,> div > video{width:100px;height:100px;}> img{vertical-align:middle;}.actions{display:flex;position:absolute;bottom:-100%;width:100%;align-items:center;justify-content:space-between;font-size:2em;color:#eee;transition:bottom ease-out .2s;will-change:bottom;> a{cursor:pointer;&:hover{background:#eee;color:#333;}}}&:hover .actions{bottom:0;}"]),ze=function(e){var t=e.isAudioMuted,n=e.isAuth,o=e.profile,a=e.video,r=e.showDialog,i=e.signout,c=e.toggleAudio;return n?p.a.createElement("div",null,p.a.createElement(Ue,null,a&&a.srcObject.getVideoTracks().length?p.a.createElement(Oe,{video:a}):p.a.createElement("img",{src:"".concat(U.baseURL,"user/").concat(o._id,"/photo?auth=").concat(U.token)}),p.a.createElement("div",{className:"actions"},p.a.createElement("a",{onClick:c},t?p.a.createElement(pe.TiVolumeMute,null):p.a.createElement(pe.TiVolumeDown,null)),p.a.createElement("a",{onClick:function(){return r("User.Settings")}},p.a.createElement(pe.TiCog,null)),p.a.createElement("a",{onClick:i},p.a.createElement(pe.TiEject,null)))),p.a.createElement(Ne,null)):null};ze.propTypes={isAudioMuted:de.a.bool.isRequired,isAuth:de.a.bool.isRequired,profile:de.a.shape({_id:de.a.string}).isRequired,video:de.a.oneOfType([de.a.bool,de.a.object]).isRequired,showDialog:de.a.func.isRequired,signout:de.a.func.isRequired,toggleAudio:de.a.func.isRequired};var De=Object(u.connect)(function(e){var t=e.user;return{isAudioMuted:t.isAudioMuted,isAuth:t.isAuth,profile:t.profile,video:t.video}},{showDialog:he,signout:function(){return{type:q}},toggleAudio:function(){return{type:M}}})(ze),Ge=me.a.div.withConfig({displayName:"layout__Route",componentId:"wopef3-0"})(["display:flex;height:100vh;"]),Fe={backgroundColor:"#393",zIndex:1},Be=function(e){var t=e.children;return p.a.createElement("div",null,p.a.createElement(s.a,{style:Fe}),p.a.createElement(Ge,null,t),p.a.createElement(De,null))};Be.propTypes={children:de.a.node.isRequired};var We=Be,He=n("2iEm");function Ve(e){return(Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Je(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ze(e,t){return(Ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qe=function(e){function a(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=this,(t=!(o=Ke(a).call(this,e))||"object"!==Ve(o)&&"function"!=typeof o?Ye(n):o).loginWithGoogle=t.loginWithGoogle.bind(Ye(t)),t.onMessage=t.onMessage.bind(Ye(t)),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ze(e,t)}(a,r["PureComponent"]),t=a,(n=[{key:"componentWillUnmount",value:function(){var e=this.popupWatcher;e&&(window.removeEventListener("message",this.onMessage),clearInterval(e),delete this.popupWatcher)}},{key:"onMessage",value:function(e){var t=e.origin,n=e.data.session,o=this.popupWatcher,a=this.props,r=a.onSession,i=a.refreshSession;0===U.baseURL.indexOf(t)&&(window.removeEventListener("message",this.onMessage),clearInterval(o),delete this.popupWatcher,n&&(i(n),r&&r(n)))}},{key:"loginWithGoogle",value:function(e){var t=this,n=e.screenX,o=e.screenY,a=(n||window.screen.width/2)-256,r=(o||window.screen.height/2)-256,i=window.open("".concat(U.baseURL,"user/google"),"loginWithGoogle","width=".concat(512,",height=").concat(512,",top=").concat(r,",left=").concat(a));this.popupWatcher&&(window.removeEventListener("message",this.onMessage),clearInterval(this.popupWatcher)),this.popupWatcher=setInterval(function(){if(!i.window)return clearInterval(t.popupWatcher),void delete t.popupWatcher;i.postMessage(!0,U.baseURL)},100),window.addEventListener("message",this.onMessage,!1)}},{key:"render",value:function(){var e=this.props,t=e.icon,n=e.label;return p.a.createElement(Se,{type:"button",onClick:this.loginWithGoogle},p.a.createElement(t,null),p.a.createElement(f.Translate,{value:n}))}}])&&Je(t.prototype,n),o&&Je(t,o),a}();Qe.defaultProps={icon:pe.TiSocialGooglePlus,label:"User.signIn",onSession:void 0},Qe.propTypes={icon:de.a.func,label:de.a.string,onSession:de.a.func,refreshSession:de.a.func.isRequired};var Xe=Object(u.connect)(function(){return{}},{refreshSession:z})(Qe),$e=me.a.div.withConfig({displayName:"page__Scroll",componentId:"sc-2p96wn-0"})(["display:flex;width:100%;overflow-y:overlay;"]),et=me.a.div.withConfig({displayName:"page__Wrapper",componentId:"sc-2p96wn-1"})(["display:flex;width:100%;max-width:1024px;flex-direction:column;background:#fff;margin:0 auto;box-shadow:0 0 150px rgba(0,0,0,.15);"]),tt=function(e){var t=e.children,n=e.className;return p.a.createElement($e,null,p.a.createElement(et,{className:n},t))};tt.defaultProps={className:null},tt.propTypes={children:de.a.oneOfType([de.a.element,de.a.arrayOf(de.a.element)]).isRequired,className:de.a.string};var nt=tt;function ot(e){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function at(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function rt(e){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function it(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ct(e,t){return(ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ut=me.a.div.withConfig({displayName:"landing__Heading",componentId:"sc-8xfovt-0"})(["display:flex;flex-shrink:0;flex-direction:column;align-items:center;justify-content:center;background:#222;height:300px;> h2{color:#fff;font-size:3em;margin:0 0 1.5rem;}> p{color:#eee;margin:0;font-size:1.5em;}"]),lt=me.a.div.withConfig({displayName:"landing__Grid",componentId:"sc-8xfovt-1"})(["display:flex;height:100%;> div,> ul{&:nth-child(1){width:60%;}&:nth-child(2){width:40%;}}"]),st=me.a.div.withConfig({displayName:"landing__Orgs",componentId:"sc-8xfovt-2"})(["background:#eee;> h3{margin:0;font-size:1.5em;color:#666;padding:1.5rem 1.5rem 1rem;border-bottom:1px solid #ddd;}> a{display:flex;box-sizing:border-box;width:100%;align-items:center;justify-content:space-between;font-size:1.5em;padding:0.75rem 1.5rem;color:#000;text-decoration:none;transition:color ease-out .15s,background-color ease-out .15s;will-change:color,background-color;&:nth-child(odd){background:#ddd;}&.full{opacity:0.5;pointer-events:none;}> strong > img{width:1.5rem;height:1.125rem;margin-right:1rem;vertical-align:middle;}&:hover{color:#eee;background-color:#393;}}> button{margin:1.5rem auto;> svg{font-size:2em;}}"]),dt=me.a.ul.withConfig({displayName:"landing__Features",componentId:"sc-8xfovt-3"})(["margin:2rem 1rem;text-align:left;> li{padding:0.5rem 0.5rem;font-size:1.5em;}"]),mt=me.a.div.withConfig({displayName:"landing__CTA",componentId:"sc-8xfovt-4"})(["margin-top:auto;padding:1rem 0 2rem;background:#393;color:#eee;> p{font-size:1.5em;text-align:center;}> button{margin:0 auto;font-size:2em;padding:1rem 2rem;}"]),pt=function(e){function a(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=this,(t=!(o=rt(a).call(this,e))||"object"!==ot(o)&&"function"!=typeof o?it(n):o).onSubmit=t.onSubmit.bind(it(t)),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ct(e,t)}(a,r["PureComponent"]),t=a,(n=[{key:"componentWillMount",value:function(){var e=this.props,t=e.fetchOrgs;e.isAuth&&t()}},{key:"componentDidUpdate",value:function(e){var t=e.isAuth,n=this.props,o=n.isAuth,a=n.fetchOrgs;!t&&o&&a()}},{key:"componentWillUnmount",value:function(){(0,this.props.hideDialog)("Org.Signup")}},{key:"onSubmit",value:function(e){var t=this.props,n=t.hideDialog,o=t.history,a=t.signup,r=e.target;e.preventDefault();var i=r.name.value;i&&a({name:i}).then(function(e){var t=e.value;return o.push("/".concat(t))}).catch(function(){}).finally(function(){return n("Org.Signup")})}},{key:"render",value:function(){var e=this.props,t=e.isAuth,n=e.orgs,o=e.showDialog;return p.a.createElement(nt,null,p.a.createElement(ut,null,p.a.createElement("h2",null,"BabelChat"),p.a.createElement("p",null,"Create your own language exchange service in seconds")),p.a.createElement(lt,null,p.a.createElement(dt,null,p.a.createElement("li",null,"1 to 1 conversations with students"),p.a.createElement("li",null,"Group videochat rooms (up to 8 peers)"),p.a.createElement("li",null,"Whiteboard with drag&drop image sharing"),p.a.createElement("li",null,"Customize it with your own branding"),p.a.createElement("li",null,"Integrate it onto your website"),p.a.createElement("li",null,"Free unlimited rooms/students while in open alpha")),p.a.createElement(st,null,p.a.createElement("h3",null,"Your orgs"),t?n.map(function(e){var t=e.name,n=e.slug;return p.a.createElement(He.a,{key:n,to:{pathname:"/".concat(n)}},t)}):p.a.createElement(Xe,null))),p.a.createElement(mt,null,p.a.createElement("p",null,p.a.createElement(f.Translate,{value:"Org.CTA.copy"})),t?p.a.createElement(Se,{type:"button",onClick:function(){return o("Org.Signup")}},p.a.createElement(pe.TiGroup,null),p.a.createElement(f.Translate,{value:"Org.CTA.button"})):p.a.createElement(Xe,{icon:pe.TiGroup,label:"Org.CTA.button",onSession:function(){return o("Org.Signup")}})),p.a.createElement(Ie,{id:"Org.Signup"},p.a.createElement(Pe,{onSubmit:this.onSubmit},p.a.createElement("div",null,p.a.createElement("label",null,p.a.createElement(f.Translate,{value:"Org.Signup.name"})),p.a.createElement("input",{type:"text",name:"name"})),p.a.createElement("div",{className:"submit"},p.a.createElement(Se,{type:"submit"},p.a.createElement(pe.TiPlus,null),p.a.createElement(f.Translate,{value:"Org.Signup.submit"}))))))}}])&&at(t.prototype,n),o&&at(t,o),a}();pt.propTypes={history:de.a.object.isRequired,isAuth:de.a.bool.isRequired,orgs:de.a.arrayOf(de.a.shape({name:de.a.string.isRequired,slug:de.a.string.isRequired})).isRequired,fetchOrgs:de.a.func.isRequired,hideDialog:de.a.func.isRequired,showDialog:de.a.func.isRequired,signup:de.a.func.isRequired};var ft=Object(u.connect)(function(e){var t=e.user;return{isAuth:t.isAuth,orgs:t.orgs}},{fetchOrgs:function(){return{type:"USER/FETCH_ORGS",payload:U.fetch({endpoint:"user/orgs"})}},hideDialog:fe,showDialog:he,signup:function(e){var t=e.name;return{type:"ORG/SIGNUP",payload:U.fetch({body:{name:t},endpoint:"orgs",method:"PUT"})}}})(pt),ht=me.a.div.withConfig({displayName:"sc-404__Wrapper",componentId:"ga9xrh-0"})(["display:flex;width:100%;flex-direction:column;align-items:center;justify-content:center;"]),gt=me.a.div.withConfig({displayName:"sc-404__Status",componentId:"ga9xrh-1"})(["font-size:6em;line-height:0.8em;color:#656565;margin-bottom:2rem;"]),yt=me.a.div.withConfig({displayName:"sc-404__Description",componentId:"ga9xrh-2"})(["font-size:1.5em;"]),vt=me.a.div.withConfig({displayName:"sc-404__Alternative",componentId:"ga9xrh-3"})(["margin:2rem 0 4rem;> a{text-decoration:none;font-size:1.2em;}"]),bt=function(){return p.a.createElement(ht,null,p.a.createElement(gt,null,"404"),p.a.createElement(yt,null,p.a.createElement(f.Translate,{value:"NotFound.description"})),p.a.createElement(vt,null,p.a.createElement(He.a,{to:{pathname:"/"}},p.a.createElement(Se,{type:"button",primary:!0},p.a.createElement(pe.TiArrowBack,null),p.a.createElement(f.Translate,{value:"NotFound.goBack"})))))},Et=me.a.div.withConfig({displayName:"tabs",componentId:"y7wrc4-0"})(["box-sizing:border-box;display:flex;margin:-1rem;margin-bottom:1rem;background-color:#111;color:#eee;height:2.5rem;> div{display:flex;align-items:center;font-weight:700;padding:0 1rem;height:100%;cursor:pointer;transition:background-color ease-out .2s;will-change:background-color,color;border-bottom:1px solid #eee;border-right:1px solid #222;&:hover{background-color:#333;}&.active{background-color:#eee;color:#353535;cursor:default;}}"]),wt=[{name:"Afghanistan",code:"af"},{name:"Åland Islands",code:"ax"},{name:"Albania",code:"al"},{name:"Algeria",code:"dz"},{name:"American Samoa",code:"as"},{name:"Andorra",code:"ad"},{name:"Angola",code:"ao"},{name:"Anguilla",code:"ai"},{name:"Antarctica",code:"aq"},{name:"Antigua and Barbuda",code:"ag"},{name:"Argentina",code:"ar"},{name:"Armenia",code:"am"},{name:"Aruba",code:"aw"},{name:"Australia",code:"au"},{name:"Austria",code:"at"},{name:"Azerbaijan",code:"az"},{name:"Bahamas",code:"bs"},{name:"Bahrain",code:"bh"},{name:"Bangladesh",code:"bd"},{name:"Barbados",code:"bb"},{name:"Belarus",code:"by"},{name:"Belgium",code:"be"},{name:"Belize",code:"bz"},{name:"Benin",code:"bj"},{name:"Bermuda",code:"bm"},{name:"Bhutan",code:"bt"},{name:"Bolivia, Plurinational State of",code:"bo"},{name:"Bonaire, Sint Eustatius and Saba",code:"bq"},{name:"Bosnia and Herzegovina",code:"ba"},{name:"Botswana",code:"bw"},{name:"Bouvet Island",code:"bv"},{name:"Brazil",code:"br"},{name:"British Indian Ocean Territory",code:"io"},{name:"Brunei Darussalam",code:"bn"},{name:"Bulgaria",code:"bg"},{name:"Burkina Faso",code:"bf"},{name:"Burundi",code:"bi"},{name:"Cambodia",code:"kh"},{name:"Cameroon",code:"cm"},{name:"Canada",code:"ca"},{name:"Cape Verde",code:"cv"},{name:"Catalonia",code:"es-ct"},{name:"Cayman Islands",code:"ky"},{name:"Central African Republic",code:"cf"},{name:"Chad",code:"td"},{name:"Chile",code:"cl"},{name:"China",code:"cn"},{name:"Christmas Island",code:"cx"},{name:"Cocos (Keeling) Islands",code:"cc"},{name:"Colombia",code:"co"},{name:"Comoros",code:"km"},{name:"Congo",code:"cg"},{name:"Congo, the Democratic Republic of the",code:"cd"},{name:"Cook Islands",code:"ck"},{name:"Costa Rica",code:"cr"},{name:"Côte d'Ivoire",code:"ci"},{name:"Croatia",code:"hr"},{name:"Cuba",code:"cu"},{name:"Curaçao",code:"cw"},{name:"Cyprus",code:"cy"},{name:"Czech Republic",code:"cz"},{name:"Denmark",code:"dk"},{name:"Djibouti",code:"dj"},{name:"Dominica",code:"dm"},{name:"Dominican Republic",code:"do"},{name:"Ecuador",code:"ec"},{name:"Egypt",code:"eg"},{name:"El Salvador",code:"sv"},{name:"Equatorial Guinea",code:"gq"},{name:"Eritrea",code:"er"},{name:"Estonia",code:"ee"},{name:"Ethiopia",code:"et"},{name:"European Union",code:"eu"},{name:"Falkland Islands (Malvinas)",code:"fk"},{name:"Faroe Islands",code:"fo"},{name:"Fiji",code:"fj"},{name:"Finland",code:"fi"},{name:"France",code:"fr"},{name:"French Guiana",code:"gf"},{name:"French Polynesia",code:"pf"},{name:"French Southern Territories",code:"tf"},{name:"Gabon",code:"ga"},{name:"Gambia",code:"gm"},{name:"Georgia",code:"ge"},{name:"Germany",code:"de"},{name:"Ghana",code:"gh"},{name:"Gibraltar",code:"gi"},{name:"Greece",code:"gr"},{name:"Greenland",code:"gl"},{name:"Grenada",code:"gd"},{name:"Guadeloupe",code:"gp"},{name:"Guam",code:"gu"},{name:"Guatemala",code:"gt"},{name:"Guernsey",code:"gg"},{name:"Guinea",code:"gn"},{name:"Guinea-Bissau",code:"gw"},{name:"Guyana",code:"gy"},{name:"Haiti",code:"ht"},{name:"Heard Island and McDonald Islands",code:"hm"},{name:"Holy See (Vatican City State)",code:"va"},{name:"Honduras",code:"hn"},{name:"Hong Kong",code:"hk"},{name:"Hungary",code:"hu"},{name:"Iceland",code:"is"},{name:"India",code:"in"},{name:"Indonesia",code:"id"},{name:"Iran, Islamic Republic of",code:"ir"},{name:"Iraq",code:"iq"},{name:"Ireland",code:"ie"},{name:"Isle of Man",code:"im"},{name:"Israel",code:"il"},{name:"Italy",code:"it"},{name:"Jamaica",code:"jm"},{name:"Japan",code:"jp"},{name:"Jersey",code:"je"},{name:"Jordan",code:"jo"},{name:"Kazakhstan",code:"kz"},{name:"Kenya",code:"ke"},{name:"Kiribati",code:"ki"},{name:"Korea, Democratic People's Republic of",code:"kp"},{name:"Korea, Republic of",code:"kr"},{name:"Kuwait",code:"kw"},{name:"Kyrgyzstan",code:"kg"},{name:"Lao People's Democratic Republic",code:"la"},{name:"Latvia",code:"lv"},{name:"Lebanon",code:"lb"},{name:"Lesotho",code:"ls"},{name:"Liberia",code:"lr"},{name:"Libya",code:"ly"},{name:"Liechtenstein",code:"li"},{name:"Lithuania",code:"lt"},{name:"Luxembourg",code:"lu"},{name:"Macao",code:"mo"},{name:"Macedonia, the Former Yugoslav Republic of",code:"mk"},{name:"Madagascar",code:"mg"},{name:"Malawi",code:"mw"},{name:"Malaysia",code:"my"},{name:"Maldives",code:"mv"},{name:"Mali",code:"ml"},{name:"Malta",code:"mt"},{name:"Marshall Islands",code:"mh"},{name:"Martinique",code:"mq"},{name:"Mauritania",code:"mr"},{name:"Mauritius",code:"mu"},{name:"Mayotte",code:"yt"},{name:"Mexico",code:"mx"},{name:"Micronesia, Federated States of",code:"fm"},{name:"Moldova, Republic of",code:"md"},{name:"Monaco",code:"mc"},{name:"Mongolia",code:"mn"},{name:"Montenegro",code:"me"},{name:"Montserrat",code:"ms"},{name:"Morocco",code:"ma"},{name:"Mozambique",code:"mz"},{name:"Myanmar",code:"mm"},{name:"Namibia",code:"na"},{name:"Nauru",code:"nr"},{name:"Nepal",code:"np"},{name:"Netherlands",code:"nl"},{name:"New Caledonia",code:"nc"},{name:"New Zealand",code:"nz"},{name:"Nicaragua",code:"ni"},{name:"Niger",code:"ne"},{name:"Nigeria",code:"ng"},{name:"Niue",code:"nu"},{name:"Norfolk Island",code:"nf"},{name:"Northern Mariana Islands",code:"mp"},{name:"Norway",code:"no"},{name:"Oman",code:"om"},{name:"Pakistan",code:"pk"},{name:"Palau",code:"pw"},{name:"Palestine, State of",code:"ps"},{name:"Panama",code:"pa"},{name:"Papua New Guinea",code:"pg"},{name:"Paraguay",code:"py"},{name:"Peru",code:"pe"},{name:"Philippines",code:"ph"},{name:"Pitcairn",code:"pn"},{name:"Poland",code:"pl"},{name:"Portugal",code:"pt"},{name:"Puerto Rico",code:"pr"},{name:"Qatar",code:"qa"},{name:"Réunion",code:"re"},{name:"Romania",code:"ro"},{name:"Russian Federation",code:"ru"},{name:"Rwanda",code:"rw"},{name:"Saint Barthélemy",code:"bl"},{name:"Saint Helena, Ascension and Tristan da Cunha",code:"sh"},{name:"Saint Kitts and Nevis",code:"kn"},{name:"Saint Lucia",code:"lc"},{name:"Saint Martin (French part)",code:"mf"},{name:"Saint Pierre and Miquelon",code:"pm"},{name:"Saint Vincent and the Grenadines",code:"vc"},{name:"Samoa",code:"ws"},{name:"San Marino",code:"sm"},{name:"Sao Tome and Principe",code:"st"},{name:"Saudi Arabia",code:"sa"},{name:"Senegal",code:"sn"},{name:"Serbia",code:"rs"},{name:"Seychelles",code:"sc"},{name:"Sierra Leone",code:"sl"},{name:"Singapore",code:"sg"},{name:"Sint Maarten (Dutch part)",code:"sx"},{name:"Slovakia",code:"sk"},{name:"Slovenia",code:"si"},{name:"Solomon Islands",code:"sb"},{name:"Somalia",code:"so"},{name:"South Africa",code:"za"},{name:"South Georgia and the South Sandwich Islands",code:"gs"},{name:"South Sudan",code:"ss"},{name:"Spain",code:"es"},{name:"Sri Lanka",code:"lk"},{name:"Sudan",code:"sd"},{name:"Suriname",code:"sr"},{name:"Svalbard and Jan Mayen",code:"sj"},{name:"Swaziland",code:"sz"},{name:"Sweden",code:"se"},{name:"Switzerland",code:"ch"},{name:"Syrian Arab Republic",code:"sy"},{name:"Taiwan, Province of China",code:"tw"},{name:"Tajikistan",code:"tj"},{name:"Tanzania, United Republic of",code:"tz"},{name:"Thailand",code:"th"},{name:"Timor-Leste",code:"tl"},{name:"Togo",code:"tg"},{name:"Tokelau",code:"tk"},{name:"Tonga",code:"to"},{name:"Trinidad and Tobago",code:"tt"},{name:"Tunisia",code:"tn"},{name:"Turkey",code:"tr"},{name:"Turkmenistan",code:"tm"},{name:"Turks and Caicos Islands",code:"tc"},{name:"Tuvalu",code:"tv"},{name:"Uganda",code:"ug"},{name:"Ukraine",code:"ua"},{name:"United Arab Emirates",code:"ae"},{name:"United Kingdom",code:"gb"},{name:"England",code:"gb-eng"},{name:"Northern Ireland",code:"gb-nir"},{name:"Scotland",code:"gb-sct"},{name:"Wales",code:"gb-wls"},{name:"United Nations",code:"un"},{name:"United States",code:"us"},{name:"United States Minor Outlying Islands",code:"um"},{name:"Uruguay",code:"uy"},{name:"Uzbekistan",code:"uz"},{name:"Vanuatu",code:"vu"},{name:"Venezuela, Bolivarian Republic of",code:"ve"},{name:"Viet Nam",code:"vn"},{name:"Virgin Islands, British",code:"vg"},{name:"Virgin Islands, U.S.",code:"vi"},{name:"Wallis and Futuna",code:"wf"},{name:"Western Sahara",code:"eh"},{name:"Yemen",code:"ye"},{name:"Zambia",code:"zm"},{name:"Zimbabwe",code:"zw"}];function Ot(e){return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function St(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Rt(e){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _t(e,t){return(_t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Tt=function(e){function a(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=this,(t=!(o=Rt(a).call(this,e))||"object"!==Ot(o)&&"function"!=typeof o?kt(n):o).onSubmit=t.onSubmit.bind(kt(t)),t.state={type:"public"},t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_t(e,t)}(a,r["PureComponent"]),t=a,(n=[{key:"onSubmit",value:function(e){var t=this.props,n=t.hide,o=t.createRoom,a=this.state.type,r=e.target;e.preventDefault();var i={type:a,flag:r.flag.value,name:r.name.value};if(i.flag&&i.name){switch(a){case"public":if(i.peerLimit=parseInt(r.peerLimit.value,10),!i.peerLimit)return}o(i).then(function(){return n("Org.CreateRoom")})}}},{key:"render",value:function(){var e=this,t=this.state.type;return p.a.createElement(Ie,{id:"Org.CreateRoom"},p.a.createElement(Et,null,p.a.createElement("div",{className:"public"===t?"active":"",onClick:function(){return e.setState({type:"public"})}},p.a.createElement(f.Translate,{value:"Org.CreateRoom.publicRoom"})),p.a.createElement("div",{className:"private"===t?"active":"",onClick:function(){return e.setState({type:"private"})}},p.a.createElement(f.Translate,{value:"Org.CreateRoom.inviteOnly"}))),p.a.createElement(Pe,{onSubmit:this.onSubmit},p.a.createElement("div",null,p.a.createElement("label",null,p.a.createElement(f.Translate,{value:"Org.CreateRoom.name"})),p.a.createElement("input",{type:"text",name:"name",required:!0,autoFocus:!0})),p.a.createElement("div",null,p.a.createElement("label",null,p.a.createElement(f.Translate,{value:"Org.CreateRoom.flag"})),p.a.createElement("select",{name:"flag",defaultValue:"gb",required:!0},wt.map(function(e){var t=e.code,n=e.name;return p.a.createElement("option",{key:t,value:t},n)}))),"public"===t?p.a.createElement("div",null,p.a.createElement("label",null,p.a.createElement(f.Translate,{value:"Org.CreateRoom.peerLimit"})),p.a.createElement("input",{type:"number",name:"peerLimit",min:"2",max:"8",defaultValue:"4",required:!0})):null,"private"===t?p.a.createElement("div",null,p.a.createElement("label",null,p.a.createElement(f.Translate,{value:"Org.CreateRoom.users"})),p.a.createElement("div",null,"Invite peers UI will go here",p.a.createElement("br",null),p.a.createElement("br",null),p.a.createElement("br",null))):null,p.a.createElement("div",{className:"submit"},p.a.createElement(Se,{type:"submit"},p.a.createElement(pe.TiPlus,null),p.a.createElement(f.Translate,{value:"Org.CreateRoom.submit"})))))}}])&&St(t.prototype,n),o&&St(t,o),a}();Tt.propTypes={createRoom:de.a.func.isRequired,hide:de.a.func.isRequired};var jt=Object(u.connect)(function(){return{}},{createRoom:function(e){var o=e.flag,a=e.name,r=e.peerLimit;return function(e,t){var n=t().org.id;return e({type:"ORG/CREATE_ROOM",payload:U.fetch({body:{flag:o,name:a,peerLimit:r},endpoint:"org/".concat(n,"/rooms"),method:"PUT"})})}},hide:fe})(Tt);function It(e){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ct(e,t){return!t||"object"!==It(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function xt(e){return(xt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function At(e,t){return(At=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qt=me.a.div.withConfig({displayName:"rooms__Listing",componentId:"j6zg2b-0"})(["display:flex;flex-direction:column;align-items:center;> a{display:flex;box-sizing:border-box;width:100%;align-items:center;justify-content:space-between;font-size:1.5em;padding:1rem;color:#000;text-decoration:none;transition:color ease-out .15s,background-color ease-out .15s;will-change:color,background-color;&:nth-child(even){background:#ddd;}&.full{opacity:0.5;pointer-events:none;}> strong > img{width:1.5rem;height:1.125rem;margin-right:1rem;vertical-align:middle;}&:hover{color:#eee;background-color:#393;}}&.admin > a{> svg{display:none;}&:hover{> span{display:none;}> svg{display:block;}}}"]),Lt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ct(this,xt(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&At(e,t)}(t,r["PureComponent"]),n=t,(o=[{key:"componentDidMount",value:function(){(0,this.props.fetch)()}},{key:"onRemove",value:function(e,t){var n=this.props.removeRoom;e.preventDefault(),n(t)}},{key:"render",value:function(){var i=this,e=this.props,c=e.isAdmin,t=e.list,u=e.org;return p.a.createElement(qt,{className:c?"admin":null},t.map(function(e){var t=e.flag,n=e.name,o=e.peerLimit,a=e.peers,r=e.slug;return p.a.createElement(He.a,{key:r,to:{pathname:"/".concat(u,"/").concat(r)},className:o<=a?"full":""},p.a.createElement("strong",null,p.a.createElement("img",{src:"".concat("https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/flags/4x3/").concat(t,".svg")}),n),p.a.createElement(f.Translate,{count:a,limit:o,value:"Rooms.peers"}),c?p.a.createElement(pe.TiTrash,{onClick:function(e){return i.onRemove(e,r)}}):null)}))}}])&&Pt(n.prototype,o),a&&Pt(n,a),t}();Lt.propTypes={isAdmin:de.a.bool.isRequired,list:de.a.arrayOf(de.a.shape({flag:de.a.string.isRequired,name:de.a.string.isRequired,peerLimit:de.a.number.isRequired,peers:de.a.number.isRequired,slug:de.a.string.isRequired})).isRequired,org:de.a.string.isRequired,fetch:de.a.func.isRequired,removeRoom:de.a.func.isRequired};var Mt=Object(u.connect)(function(e){var t=e.org;return{isAdmin:t.isAdmin,list:t.rooms}},{fetch:function(){return function(e,t){var n=t().org.id;return e({type:"ORG/FETCH_ROOMS",payload:U.fetch({endpoint:"org/".concat(n,"/rooms")})})}},removeRoom:function(o){return function(e,t){var n=t().org.id;return e({type:"ORG/REMOVE_ROOM",payload:U.fetch({endpoint:"org/".concat(n,"/room/").concat(o),method:"DELETE"}).then(function(){return{slug:o}})})}}})(Lt),Nt=n("9C/b");function Ut(e){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Dt(e){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ft(e,t){return(Ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Bt=Object(me.a)(Pe).withConfig({displayName:"settings__DangerZone",componentId:"y9vk0-0"})(["background:#933;border-radius:2px;padding:2.188rem 0;> div > button{margin-top:0;background:#933;}"]),Wt=function(e){function a(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=this,(t=!(o=Dt(a).call(this,e))||"object"!==Ut(o)&&"function"!=typeof o?Gt(n):o).onRemove=t.onRemove.bind(Gt(t)),t.onSubmit=t.onSubmit.bind(Gt(t)),t.state={tab:"organization"},t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ft(e,t)}(a,r["PureComponent"]),t=a,(n=[{key:"onRemove",value:function(){var e=this.props,t=e.history;(0,e.remove)().then(function(){return t.replace("/")})}},{key:"onSubmit",value:function(e){var t=this.props,n=t.hide,o=t.update,a=e.target;e.preventDefault();var r=a.name.value;r&&o({name:r}).then(function(){return n("Org.Settings")})}},{key:"render",value:function(){var e=this,t=this.props.name,n=this.state.tab;return p.a.createElement(Ie,{id:"Org.Settings"},p.a.createElement(Et,null,p.a.createElement("div",{className:"organization"===n?"active":"",onClick:function(){return e.setState({tab:"organization"})}},p.a.createElement(f.Translate,{value:"Org.Settings.organization"})),p.a.createElement("div",{className:"dangerzone"===n?"active":"",onClick:function(){return e.setState({tab:"dangerzone"})}},p.a.createElement(f.Translate,{value:"Org.Settings.dangerZone"}))),"organization"===n?p.a.createElement(Pe,{onSubmit:this.onSubmit},p.a.createElement("div",null,p.a.createElement("label",null,p.a.createElement(f.Translate,{value:"Org.Settings.name"})),p.a.createElement("input",{defaultValue:t,type:"text",name:"name",required:!0,autoFocus:!0})),p.a.createElement("div",{className:"submit"},p.a.createElement(Se,{type:"submit"},p.a.createElement(pe.TiTick,null),p.a.createElement(f.Translate,{value:"Org.Settings.save"})))):null,"dangerzone"===n?p.a.createElement(Bt,null,p.a.createElement("div",{className:"submit"},p.a.createElement(Se,{type:"button",onClick:this.onRemove},p.a.createElement(pe.TiTimes,null),p.a.createElement(f.Translate,{value:"Org.Settings.remove"})))):null)}}])&&zt(t.prototype,n),o&&zt(t,o),a}();Wt.propTypes={history:de.a.object.isRequired,name:de.a.string.isRequired,hide:de.a.func.isRequired,remove:de.a.func.isRequired,update:de.a.func.isRequired};var Ht=Object(Nt.a)(Object(u.connect)(function(e){return{name:e.org.name}},{hide:fe,remove:function(){return function(e,t){var n=t().org.id;return e({type:"ORG/REMOVE",payload:U.fetch({endpoint:"org/".concat(n),method:"DELETE"})})}},update:function(e){var o=e.name;return function(e,t){var n=t().org.id;return e({type:"ORG/UPDATE",payload:U.fetch({body:{name:o},endpoint:"org/".concat(n),method:"POST"})})}}})(Wt));function Vt(e){return(Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Kt(e,t){return!t||"object"!==Vt(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function Yt(e){return(Yt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zt(e,t){return(Zt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qt=me.a.div.withConfig({displayName:"users__Scroll",componentId:"sc-1u1f4yo-0"})(["max-height:400px;overflow-y:auto;> div.empty{text-align:center;color:#999;font-size:1.5em;}"]),Xt=me.a.div.withConfig({displayName:"users__User",componentId:"sc-1u1f4yo-1"})(["display:flex;align-items:center;justify-content:space-between;width:100%;margin-bottom:0.5rem;&:last-child{margin-bottom:0;}> div{display:flex;align-items:center;> button{margin-left:0.5rem;}> img{width:32px;height:32px;border-radius:16px;margin-right:0.5rem;vertical-align:middle;}}> button{display:none;padding:0.2rem 1rem;font-size:1.4rem;}&:hover > button{display:flex;}"]),$t=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Kt(this,Yt(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zt(e,t)}(t,r["PureComponent"]),n=t,(o=[{key:"componentDidMount",value:function(){(0,this.props.fetch)()}},{key:"render",value:function(){var e=this.props,t=e.list,a=e.removeUser,r=e.resolveRequest;return p.a.createElement(Ie,{id:"Org.ManageUsers",width:"512px"},p.a.createElement(Qt,null,t.map(function(e){var t=e._id,n=e.isRequest,o=e.name;return p.a.createElement(Xt,{key:t},p.a.createElement("div",null,p.a.createElement("img",{src:"".concat(U.baseURL,"user/").concat(t,"/photo?auth=").concat(U.token)}),o),n?p.a.createElement("div",null,p.a.createElement(Se,{type:"button",onClick:function(){return r({user:t,resolution:"decline"})}},p.a.createElement(pe.TiTimes,null),p.a.createElement(f.Translate,{value:"Org.ManageUsers.decline"})),p.a.createElement(Se,{type:"button",onClick:function(){return r({user:t,resolution:"approve"})},primary:!0},p.a.createElement(pe.TiTick,null),p.a.createElement(f.Translate,{value:"Org.ManageUsers.approve"}))):p.a.createElement(Se,{type:"button",onClick:function(){return a(t)}},p.a.createElement(pe.TiTrash,null)))}),t.length?null:p.a.createElement("div",{className:"empty"},p.a.createElement("p",null,p.a.createElement(f.Translate,{value:"Org.ManageUsers.empty"})))))}}])&&Jt(n.prototype,o),a&&Jt(n,a),t}();$t.propTypes={list:de.a.arrayOf(de.a.shape({_id:de.a.string.isRequired,isRequest:de.a.bool,name:de.a.string.isRequired})).isRequired,fetch:de.a.func.isRequired,removeUser:de.a.func.isRequired,resolveRequest:de.a.func.isRequired};var en=Object(u.connect)(function(e){return{list:e.org.users}},{fetch:function(){return function(e,t){var n=t().org.id;return e({type:"ORG/FETCH_USERS",payload:U.fetch({endpoint:"org/".concat(n,"/users")})})}},removeUser:function(o){return function(e,t){var n=t().org.id;return e({type:"ORG/REMOVE_USER",payload:U.fetch({endpoint:"org/".concat(n,"/user/").concat(o),method:"DELETE"}).then(function(){return{user:o}})})}},resolveRequest:function(e){var o=e.user,a=e.resolution;return function(e,t){var n=t().org.id;return e({type:"ORG/RESOLVE_REQUEST",payload:U.fetch({endpoint:"org/".concat(n,"/user/").concat(o,"/").concat(a),method:"POST"}).then(function(){return{user:o,resolution:a}})})}}})($t);function tn(e){return(tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],o=!0,a=!1,r=void 0;try{for(var i,c=e[Symbol.iterator]();!(o=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){a=!0,r=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function on(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function an(e,t){return!t||"object"!==tn(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function rn(e){return(rn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cn(e,t){return(cn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var un=Object(me.a)(nt).withConfig({displayName:"org__Layout",componentId:"lwp656-0"})(["flex-direction:row;> div{box-sizing:border-box;flex-shrink:0;}"]),ln=me.a.div.withConfig({displayName:"org__Nav",componentId:"lwp656-1"})(["display:flex;width:",";flex-direction:column;align-items:center;padding:1rem;background:#222;color:#eee;"],"212px"),sn=me.a.div.withConfig({displayName:"org__Content",componentId:"lwp656-2"})(["width:calc(100% - ",");display:flex;flex-direction:column;"],"212px"),dn="\n  > button {\n    position: absolute;\n    bottom: 0;\n    right: 0;\n    padding: 0.25rem;\n    display: flex;\n    font-size: 1.5em;\n    border-radius: 2px 0 0 0;\n    opacity: 0;\n    transition: opacity ease-out .2s;\n  }\n  &:hover > button {\n    opacity: 1;    \n  }\n",mn=me.a.div.withConfig({displayName:"org__Logo",componentId:"lwp656-3"})(["position:relative;> img{width:180px;height:180px;background:#000;overflow:hidden;vertical-align:middle;}",""],dn),pn=me.a.div.withConfig({displayName:"org__Name",componentId:"lwp656-4"})(["width:100%;font-size:1.666em;padding:1rem 0 0.5rem;"]),fn=me.a.div.withConfig({displayName:"org__Url",componentId:"lwp656-5"})(["display:flex;justify-content:space-between;width:100%;padding:0 0 1.5rem;color:#aaa;user-select:all;> a{font-size:1.5em;}"]),hn=me.a.div.withConfig({displayName:"org__Actions",componentId:"lwp656-6"})(["width:100%;display:flex;flex-direction:column;align-items:center;> button{width:100%;margin:0 0 0.5rem;justify-content:flex-start;> svg{font-size:1.5em;margin-right:0.25rem;}.count{display:flex;margin-left:auto;align-items:center;justify-content:center;width:18px;height:18px;background-color:#393;border-radius:9px;font-size:0.85em;line-height:1em;transition:background-color ease-out .2s;will-change:background-color;transform:translate(25%,0);}&:hover .count{background-color:#111;}}"]),gn=me.a.div.withConfig({displayName:"org__Cover",componentId:"lwp656-7"})(["flex-shrink:0;background:#000;background-repeat:no-repeat;background-size:cover;background-position:center;background-image:url(",");width:100%;height:312px;position:relative;",""],function(e){return e.cover},dn),yn=me.a.div.withConfig({displayName:"org__Section",componentId:"lwp656-8"})(["display:flex;flex-direction:column;align-items:center;padding:3rem 0;> p{font-size:1.5rem;color:#666;}> button > svg{font-size:2em;}"]),vn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),an(this,rn(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cn(e,t)}(t,r["PureComponent"]),n=t,(o=[{key:"componentWillMount",value:function(){this.fetch()}},{key:"componentDidUpdate",value:function(e){e.isAuth!==this.props.isAuth&&this.fetch()}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.hideDialog;(0,e.reset)(),t("Org.CreateRoom"),t("Org.Settings"),t("Org.ManageUsers")}},{key:"fetch",value:function(){var e=this.props,t=e.match.params.slug,n=e.fetch,o=e.history;n(t).catch(function(){return o.replace("404")})}},{key:"updateImage",value:function(t){var n=this.props.updateImage,o=document.createElement("input");o.accept="image/*",o.type="file",o.onchange=function(){var e=nn(o.files,1)[0];e&&n({image:t,blob:e}).then(function(){return window.location.reload()})},o.click()}},{key:"render",value:function(){var e=this,t=this.props,n=t.hasLoaded,o=t.id,a=t.isActive,r=t.isAdmin,i=t.isAuth,c=t.isUser,u=t.requestAccess,l=t.match.params.slug,s=t.name,d=t.pendingRequests,m=t.showDialog;return n?p.a.createElement(un,null,p.a.createElement(ln,null,p.a.createElement(mn,null,p.a.createElement("img",{src:"".concat(U.baseURL,"org/").concat(o,"/logo")}),r?p.a.createElement(Se,{type:"button",onClick:function(){return e.updateImage("logo")}},p.a.createElement(pe.TiUpload,null)):null),p.a.createElement(pn,null,s),p.a.createElement(fn,null,"".concat("babelchat.live").concat("/").concat(l),r?p.a.createElement("a",{onClick:function(){return document.execCommand("copy")}},p.a.createElement(pe.TiClipboard,null)):null),r?p.a.createElement(hn,null,p.a.createElement(Se,{type:"button",onClick:function(){return m("Org.ManageUsers")}},p.a.createElement(pe.TiGroup,null),p.a.createElement(f.Translate,{value:"Org.Nav.manageUsers"}),0<d?p.a.createElement("span",{className:"count"},d):null),p.a.createElement(Se,{type:"button",onClick:function(){return m("Org.CreateRoom")}},p.a.createElement(pe.TiMessages,null),p.a.createElement(f.Translate,{value:"Org.Nav.createRoom"})),p.a.createElement(Se,{type:"button",onClick:function(){return m("Org.Settings")}},p.a.createElement(pe.TiCog,null),p.a.createElement(f.Translate,{value:"Org.Nav.settings"}))):null),p.a.createElement(sn,null,p.a.createElement(gn,{cover:"".concat(U.baseURL,"org/").concat(o,"/cover")},r?p.a.createElement(Se,{type:"button",onClick:function(){return e.updateImage("cover")}},p.a.createElement(pe.TiUpload,null)):null),c&&a?p.a.createElement(Mt,{org:l}):null,c&&!a?p.a.createElement(yn,null,p.a.createElement("p",null,"Your account is pending approval")):null,i&&!c?p.a.createElement(yn,null,p.a.createElement("p",null,"Your are not a student of this organization"),p.a.createElement(Se,{type:"button",onClick:u},"Request access")):null,i?null:p.a.createElement(yn,null,p.a.createElement("p",null,"Welcome, please sign-in:"),p.a.createElement(Xe,null)),r?p.a.createElement("div",null,p.a.createElement(jt,null),p.a.createElement(Ht,null),p.a.createElement(en,null)):null)):null}}])&&on(n.prototype,o),a&&on(n,a),t}();vn.propTypes={match:de.a.shape({params:de.a.shape({slug:de.a.string.isRequired}).isRequired}).isRequired,hasLoaded:de.a.bool.isRequired,history:de.a.object.isRequired,id:de.a.string.isRequired,isActive:de.a.bool.isRequired,isAdmin:de.a.bool.isRequired,isAuth:de.a.bool.isRequired,isUser:de.a.bool.isRequired,name:de.a.string.isRequired,pendingRequests:de.a.number.isRequired,fetch:de.a.func.isRequired,hideDialog:de.a.func.isRequired,requestAccess:de.a.func.isRequired,reset:de.a.func.isRequired,showDialog:de.a.func.isRequired,updateImage:de.a.func.isRequired};var bn=Object(u.connect)(function(e){var t=e.org,n=t.hasLoaded,o=t.id,a=t.isActive,r=t.isAdmin,i=t.isUser,c=t.name,u=t.pendingRequests;return{hasLoaded:n,id:o,isActive:a,isAdmin:r,isAuth:e.user.isAuth,isUser:i,name:c,pendingRequests:u}},{fetch:function(e){return{type:"ORG/FETCH",payload:U.fetch({endpoint:"org/".concat(e)})}},hideDialog:fe,requestAccess:function(){return function(e,t){var n=t().org.id;return e({type:"ORG/REQUEST_ACCESS",payload:U.fetch({endpoint:"org/".concat(n,"/users"),method:"PUT"})})}},reset:function(){return{type:E}},showDialog:he,updateImage:function(e){var a=e.image,r=e.blob;return function(e,t){var n=t().org.id,o=new FormData;return o.append("image",r),e({type:"ORG/UPDATE_IMAGE",payload:U.fetch({body:o,endpoint:"org/".concat(n,"/").concat(a),method:"POST"})})}}})(vn),En=n("fWck");function wn(e){return(wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function On(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],o=!0,a=!1,r=void 0;try{for(var i,c=e[Symbol.iterator]();!(o=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){a=!0,r=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Sn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Rn(e){return(Rn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _n(e,t){return(_n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Tn=function(e){function a(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=this,(t=!(o=Rn(a).call(this,e))||"object"!==wn(o)&&"function"!=typeof o?kn(n):o).dom=p.a.createRef(),t.onDrop=t.onDrop.bind(kn(t)),t.onPointerWheel=t.onPointerWheel.bind(kn(t)),t.onResize=t.onResize.bind(kn(t)),t.origin={x:0,y:0},t.scale=1,t.peers={},t.photos={},t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_n(e,t)}(a,r["Component"]),t=a,o=[{key:"onDragOver",value:function(e){e.preventDefault()}}],(n=[{key:"componentDidMount",value:function(){var e=this.dom.current;this.loadPhotos(this.props),e.addEventListener("dragover",a.onDragOver,!1),e.addEventListener("drop",this.onDrop,!1),window.addEventListener("resize",this.onResize,!1),this.touches=Y()(window,{filtered:!0,preventSimulated:!1}).on("start",this.onPointerStart.bind(this)).on("move",this.onPointerMove.bind(this)).on("end",this.onPointerEnd.bind(this)),Object(En.addWheelListener)(window,this.onPointerWheel),this.onResize()}},{key:"componentWillReceiveProps",value:function(e){this.loadPhotos(e),this.draw(e)}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentWillUnmount",value:function(){var e=this.dom.current;this.touches.disable(),e.removeEventListener("dragover",a.onDragOver),e.removeEventListener("drop",this.onDrop),Object(En.removeWheelListener)(window,this.onPointerWheel),window.removeEventListener("resize",this.onResize)}},{key:"onDrop",value:function(e){var t=this.props.socket,n=e.clientX,o=e.clientY,a=On(e.dataTransfer.files,1)[0];if(e.preventDefault(),a){var r=this.getPointer([n,o]),i=new FileReader;i.onload=function(){t.send(JSON.stringify({type:"ROOM/ADD_PHOTO",payload:{origin:r,photo:i.result.substr(i.result.indexOf("base64")+7)}}))},i.readAsDataURL(a)}}},{key:"onPointerStart",value:function(e,t){var i=this,n=this.props,o=n.photos,a=n.socket,r=e.button||0,c=this.getPointer(t),u=c.x,l=c.y,s=o.filter(function(e){var t=e._id,n=e.origin,o=i.photos[t];if(!o)return!1;var a=o.width,r=o.height;return!(u<n.x||u>n.x+a||l<n.y||l>n.y+r)});s.reverse();var d=s[0];0===r&&!d||2===r?this.dragging={canvas:t}:0===r&&d&&(e.shiftKey?a.send(JSON.stringify({type:"ROOM/REMOVE_PHOTO",payload:{photo:d._id}})):this.dragging={offset:{x:d.origin.x-u,y:d.origin.y-l},photo:d})}},{key:"onPointerMove",value:function(e,t){var n=this.dragging,o=this.origin,a=this.scale,r=this.props.peers,i=this.getPointer(t),c=i.x,u=i.y;if(r.forEach(function(e){var t=e.connection;t._channel&&"open"===t._channel.readyState&&t.send(new Int32Array([c,u]))}),n){if(n.canvas&&(o.x+=(t[0]-n.canvas[0])/a,o.y+=(t[1]-n.canvas[1])/a,n.canvas=t),n.photo){var l=n.offset,s=n.photo;s.origin.x=c+l.x,s.origin.y=u+l.y}this.draw()}}},{key:"onPointerEnd",value:function(){var e=this.dragging,t=this.props.socket;if(e&&(delete this.dragging,e.photo)){var n=e.photo,o=n._id,a=n.origin;t.send(JSON.stringify({type:"ROOM/MOVE_PHOTO",payload:{origin:a,photo:o}}))}}},{key:"onPointerWheel",value:function(e){var t=e.deltaY,n=1+.075*Math.min(Math.max(-t,-1),1);this.scale*=n,this.scale=Math.min(Math.max(this.scale,.25),2),this.draw()}},{key:"onResize",value:function(){var e=this.dom.current;e.width=window.innerWidth,e.height=window.innerHeight,this.draw()}},{key:"getPointer",value:function(e){var t=On(e,2),n=t[0],o=t[1],a=this.dom.current,r=this.origin,i=this.scale;return{x:Math.round((n-.5*a.width)/i-r.x),y:Math.round((o-.5*a.height)/i-r.y)}}},{key:"loadPhotos",value:function(e){var a=this,t=e.peers,n=e.photos;t.forEach(function(e){var t=e._id;if(!a.peers[t]){var n=new Image;n.src="".concat(U.baseURL,"user/").concat(t,"/photo?auth=").concat(U.token),n.onload=function(){return a.draw()},a.peers[t]=n}}),n.forEach(function(e){var t=e._id,n=e.photo;if(!a.photos[t]){var o=new Image;o.src="data:image/jpeg;base64,".concat(n),o.onload=function(){return a.draw()},a.photos[t]=o}})}},{key:"draw",value:function(e){var c=this,t=this.dom.current,n=this.origin,u=this.scale,o=e||this.props,a=o.name,r=o.peers,i=o.photos,l=t.getContext("2d");t.width=t.width,l.translate(.5*t.width,.5*t.height),l.scale(u,u),l.translate(n.x,n.y),l.textAlign="center",l.textBaseline="middle",l.fillStyle="#999",l.font="32px Arial",l.fillText(f.I18n.t("Room.".concat(a?"welcome":"joining"),{name:a}),0,0),i.forEach(function(e){var t=e._id,n=e.origin;c.photos[t]&&l.drawImage(c.photos[t],n.x,n.y)}),r.forEach(function(e){var t=e._id,n=e.pointer;if(c.peers[t]&&n){var o=On(n,2),a=o[0],r=o[1],i=24/u;l.beginPath(),l.arc(a,r,i,0,2*Math.PI),l.fill(),l.save(),l.beginPath(),l.arc(a,r,.9*i,0,2*Math.PI),l.clip(),l.drawImage(c.peers[t],a-i,r-i,2*i,2*i),l.restore()}})}},{key:"render",value:function(){var e=this.dom;return p.a.createElement("canvas",{ref:e})}}])&&Sn(t.prototype,n),o&&Sn(t,o),a}();Tn.propTypes={name:de.a.string.isRequired,peers:de.a.arrayOf(de.a.shape({_id:de.a.string.isRequired,connection:de.a.object.isRequired,pointer:de.a.arrayOf(de.a.number)})).isRequired,photos:de.a.arrayOf(de.a.shape({origin:de.a.shape({x:de.a.number.isRequired,y:de.a.number.isRequired}),photo:de.a.string.isRequired})).isRequired,socket:de.a.oneOfType([de.a.bool,de.a.object]).isRequired};var jn=Object(u.connect)(function(e){var t=e.room;return{name:t.name,peers:t.peers,photos:t.photos,socket:t.socket}})(Tn),In=n("TX9C"),Pn=n("BRrH"),Cn=n.n(Pn);function xn(e){return(xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function An(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function qn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(e){Ln(t,e,n[e])})}return t}function Ln(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Nn(e){return(Nn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Un(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zn(e,t){return(zn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Dn=function(e){function a(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=this,(t=!(o=Nn(a).call(this,e))||"object"!==xn(o)&&"function"!=typeof o?Un(n):o).onMessage=t.onMessage.bind(Un(t)),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zn(e,t)}(a,r["Component"]),t=a,(n=[{key:"componentWillMount",value:function(){var e=this.props,t=e.match.params,n=t.org,o=t.slug,a=e.settings,r=a.audioInput,i=a.videoInput,c=e.startStream;this.connectToServer({org:n,slug:o}),navigator.mediaDevices.getUserMedia({audio:!r||{deviceId:{exact:r}},video:qn({width:640,height:640},i?{deviceId:{exact:i}}:{facingMode:"user"})}).then(c).catch(function(){navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(c).catch(function(){})})}},{key:"componentWillReceiveProps",value:function(e){var t=e.match.params,n=t.org,o=t.slug,a=this.props,r=a.match.params,i=r.org,c=r.slug,u=a.reset;i===n&&c===o||(u(),this.connectToServer({org:n,slug:o}))}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentWillUnmount",value:function(){var e=this.socket,t=this.props,n=t.hideLoading,o=t.reset;e.readyState===In.a.CONNECTING&&n(),e.close(1e3),o()}},{key:"onMessage",value:function(e){var t,n=this,o=e.data,a=this.socket,r=this.props,i=r.match.params.org,c=r.addPhoto,u=r.history,l=r.join,s=r.movePhoto,d=r.peerJoin,m=r.peerLeave,p=r.peerSignal,f=r.removePhoto;try{t=JSON.parse(o)}catch(e){return}switch(t.type){case w:c(t.payload);break;case j:s(t.payload);break;case I:f(t.payload);break;case O:l(qn({},t.payload,{peers:t.payload.peers.map(function(e){return n.connectToPeer(e,!0)}),socket:a}));break;case S:d(this.connectToPeer(t.payload));break;case R:m(t.payload);break;case _:p(t.payload);break;case"ROOM/ERROR":u.replace("FULL_ROOM"===t.payload?"/".concat(i):"/404")}}},{key:"connectToServer",value:function(e){var t=this,n=e.org,o=e.slug,a=this.props,r=a.hideLoading,i=a.showLoading;this.socket&&(this.socket.readyState===In.a.CONNECTING&&r(),this.socket.close(1e3)),i(),this.socket=new In.a("".concat(U.baseURL.replace(/http/,"ws"),"org/").concat(n,"/room/").concat(o),U.token),this.socket.onopen=function(){t.socket.onclose=null,t.socket.onerror=null,r()},this.socket.onmessage=this.onMessage}},{key:"connectToPeer",value:function(n){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],t=this.socket,o=this.props,a=o.stream,r=o.peerPointer,i=o.peerStream;return n.connection=new Cn.a({initiator:e,stream:a}),n.connection.on("signal",function(e){t.send(JSON.stringify({type:"ROOM/PEER_SIGNAL",payload:{peer:n.peer,signal:e}}))}),n.connection.on("data",function(e){var t=e.buffer;return r({peer:n.peer,pointer:An(new Int32Array(t))})}),n.connection.on("stream",function(e){return i({peer:n.peer,stream:e})}),n}},{key:"render",value:function(){return null}}])&&Mn(t.prototype,n),o&&Mn(t,o),a}();Dn.propTypes={history:de.a.object.isRequired,match:de.a.shape({params:de.a.shape({org:de.a.string.isRequired,slug:de.a.string.isRequired}).isRequired}).isRequired,settings:de.a.shape({audioInput:de.a.string.isRequired,videoInput:de.a.string.isRequired}).isRequired,stream:de.a.oneOfType([de.a.bool,de.a.object]).isRequired,addPhoto:de.a.func.isRequired,hideLoading:de.a.func.isRequired,join:de.a.func.isRequired,movePhoto:de.a.func.isRequired,removePhoto:de.a.func.isRequired,reset:de.a.func.isRequired,peerJoin:de.a.func.isRequired,peerLeave:de.a.func.isRequired,peerPointer:de.a.func.isRequired,peerSignal:de.a.func.isRequired,peerStream:de.a.func.isRequired,showLoading:de.a.func.isRequired,startStream:de.a.func.isRequired};var Gn=Object(Nt.a)(Object(u.connect)(function(e){var t=e.user;return{settings:t.settings,stream:t.stream}},{addPhoto:function(e){var t=e._id,n=e.origin,o=e.photo;return{type:w,payload:{_id:t,origin:n,photo:o}}},hideLoading:l.hideLoading,join:function(e){var t=e.name,n=e.peers,o=e.photos,a=e.socket;return{type:O,payload:{name:t,peers:n,photos:o,socket:a}}},movePhoto:function(e){var t=e.origin,n=e.photo;return{type:j,payload:{origin:t,photo:n}}},removePhoto:function(e){var t=e.photo;return{type:I,payload:{photo:t}}},reset:function(){return{type:P}},peerJoin:function(e){return{type:S,payload:{peer:e}}},peerLeave:function(e){var t=e.peer;return{type:R,payload:{peer:t}}},peerPointer:function(e){var t=e.peer,n=e.pointer;return{type:k,payload:{peer:t,pointer:n}}},peerSignal:function(e){var t=e.peer,n=e.signal;return{type:_,payload:{peer:t,signal:n}}},peerStream:function(e){var t=e.peer,n=e.stream;return{type:T,payload:{peer:t,stream:n}}},showLoading:l.showLoading,startStream:function(n){return function(e,t){t().user.isAudioMuted&&n.getAudioTracks().forEach(function(e){e.enabled=!1}),e({type:L,payload:{stream:n}})}}})(Dn)),Fn=me.a.div.withConfig({displayName:"peers__Listing",componentId:"j59ndp-0"})(["position:absolute;top:100px;right:0;> img,> div > video{display:block;background:#000;width:100px;height:100px;vertical-align:middle;box-shadow:0 0 10px rgba(0,0,0,.5);}"]),Bn=function(e){var t=e.peers;return p.a.createElement(Fn,null,t.map(function(e){var t=e._id,n=e.peer,o=e.video;return o&&o.srcObject.getVideoTracks().length?p.a.createElement(Oe,{key:n,video:o}):p.a.createElement("img",{key:n,src:"".concat(U.baseURL,"user/").concat(t,"/photo?auth=").concat(U.token)})}))};Bn.propTypes={peers:de.a.arrayOf(de.a.shape({_id:de.a.string.isRequired,peer:de.a.string.isRequired,video:de.a.object})).isRequired};var Wn=Object(u.connect)(function(e){return{peers:e.room.peers}})(Bn),Hn=function(){return p.a.createElement("div",null,p.a.createElement(jn,null),p.a.createElement(Gn,null),p.a.createElement(Wn,null))};function Vn(){return(Vn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function Jn(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],0<=t.indexOf(n)||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Kn,Yn,Zn,Qn,Xn=Object(u.connect)(function(e){return{isAuth:e.user.isAuth}})(function(e){var t=e.component,n=e.isAuth,o=e.requiresAuth,a=e.requiresNoAuth,r=Jn(e,["component","isAuth","requiresAuth","requiresNoAuth"]),i=o&&!n||a&&n;return p.a.createElement(ce.a,Vn({},r,{render:function(e){return i?p.a.createElement(ue.a,{to:"/"}):p.a.createElement(t,e)}}))}),$n=function(){return p.a.createElement(We,null,p.a.createElement(le.a,null,p.a.createElement(Xn,{exact:!0,path:"/",component:ft}),p.a.createElement(Xn,{exact:!0,path:"/404",component:bt}),p.a.createElement(Xn,{exact:!0,path:"/:org/:slug",component:Hn,requiresAuth:!0}),p.a.createElement(Xn,{exact:!0,path:"/:slug",component:bn}),p.a.createElement(Xn,{path:"*",component:bt})))},eo=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,i.d),to=Object(i.e)(ie,{},eo(Object(i.a)(m.a,c.a,Object(l.loadingBarMiddleware)())));Kn=to,Yn=localStorage.getItem("BABELCHAT::LOCALE"),Zn=((window.navigator.languages?window.navigator.languages[0]:null)||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage||"en").substr(0,2).toLowerCase(),Qn="en",~F.indexOf(Yn)?Qn=Yn:~F.indexOf(Zn)&&(Qn=Zn),Object(f.syncTranslationWithStore)(Kn),Kn.dispatch(Object(f.loadTranslations)(B)),Kn.dispatch(Object(f.setLocale)(Qn)),to.getState().user.isAuth&&to.dispatch(z());var no=Object(o.a)({basename:"/"});window.location.hash&&no.replace("/".concat(window.location.hash.substr(2))),window.addEventListener("contextmenu",function(e){return e.preventDefault()},!1);var oo=document.getElementById("mount");Object(a.render)(p.a.createElement(u.Provider,{store:to},p.a.createElement(d.a,{history:no},p.a.createElement($n,null))),oo)},p2bk:function(e,t,n){}},[[0,1,2]]]);
//# sourceMappingURL=main.8cfbad7165c8737a3c4521334c7a620b.js.map